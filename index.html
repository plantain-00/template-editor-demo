<!DOCTYPE html>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="A template editor demo.">
<title>template-editor-demo</title>
<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:"Lucida Grande","Lucida Sans Unicode","Hiragino Sans GB","WenQuanYi Micro Hei","Verdana,Aril",sans-serif;-webkit-font-smoothing:antialiased}.schema-based-json-editor--card{padding:1.25rem;border:1px solid rgba(0,0,0,.125);border-radius:.25rem}button{margin:5px;padding:5px;border-radius:5px;cursor:pointer}input[type=number],input[type=text]{width:180px;padding:5px;margin:5px}select{height:29px;padding:5px;margin:5px}/*!
 * "Fork me on GitHub" CSS ribbon v0.2.3 | MIT License
 * https://github.com/simonwhitaker/github-fork-ribbon-css
*/.github-fork-ribbon{width:12.1em;height:12.1em;position:absolute;overflow:hidden;top:0;right:0;z-index:9999;pointer-events:none;font-size:13px;text-decoration:none;text-indent:-999999px}.github-fork-ribbon.fixed{position:fixed}.github-fork-ribbon:active,.github-fork-ribbon:hover{background-color:rgba(0,0,0,0)}.github-fork-ribbon:after,.github-fork-ribbon:before{position:absolute;display:block;width:15.38em;height:1.54em;top:3.23em;right:-3.23em;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.github-fork-ribbon:before{content:"";padding:.38em 0;background-color:#a00;background-image:-webkit-gradient(linear,left top,left bottom,from(rgba(0,0,0,0)),to(rgba(0,0,0,.15)));background-image:-webkit-linear-gradient(top,rgba(0,0,0,0),rgba(0,0,0,.15));background-image:-moz-linear-gradient(top,rgba(0,0,0,0),rgba(0,0,0,.15));background-image:-ms-linear-gradient(top,rgba(0,0,0,0),rgba(0,0,0,.15));background-image:-o-linear-gradient(top,rgba(0,0,0,0),rgba(0,0,0,.15));background-image:linear-gradient(to bottom,rgba(0,0,0,0),rgba(0,0,0,.15));-webkit-box-shadow:0 .15em .23em 0 rgba(0,0,0,.5);-moz-box-shadow:0 .15em .23em 0 rgba(0,0,0,.5);box-shadow:0 .15em .23em 0 rgba(0,0,0,.5);pointer-events:auto}.github-fork-ribbon:after{content:attr(data-ribbon);color:#fff;font:700 1em "Helvetica Neue",Helvetica,Arial,sans-serif;line-height:1.54em;text-decoration:none;text-shadow:0 -.08em rgba(0,0,0,.5);text-align:center;text-indent:0;padding:.15em 0;margin:.15em 0;border-width:.08em 0;border-style:dotted;border-color:#fff;border-color:rgba(255,255,255,.7)}.github-fork-ribbon.left-bottom,.github-fork-ribbon.left-top{right:auto;left:0}.github-fork-ribbon.left-bottom,.github-fork-ribbon.right-bottom{top:auto;bottom:0}.github-fork-ribbon.left-bottom:after,.github-fork-ribbon.left-bottom:before,.github-fork-ribbon.left-top:after,.github-fork-ribbon.left-top:before{right:auto;left:-3.23em}.github-fork-ribbon.left-bottom:after,.github-fork-ribbon.left-bottom:before,.github-fork-ribbon.right-bottom:after,.github-fork-ribbon.right-bottom:before{top:auto;bottom:3.23em}.github-fork-ribbon.left-top:after,.github-fork-ribbon.left-top:before,.github-fork-ribbon.right-bottom:after,.github-fork-ribbon.right-bottom:before{-webkit-transform:rotate(-45deg);-moz-transform:rotate(-45deg);-ms-transform:rotate(-45deg);-o-transform:rotate(-45deg);transform:rotate(-45deg)}.select2-container{-webkit-box-sizing:border-box;box-sizing:border-box;display:inline-block;margin:0;position:relative;vertical-align:middle;width:100%}.select2-container .select2-container-dropdown{position:absolute}.select2-container .select2-selection--single{-webkit-box-sizing:border-box;box-sizing:border-box;cursor:pointer;display:block;height:28px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.select2-container .select2-selection--single .select2-selection__rendered{display:block;padding-left:8px;padding-right:20px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.select2-container .select2-selection--single .select2-selection__clear{position:relative}.select2-container .select2-selection--multiple{-webkit-box-sizing:border-box;box-sizing:border-box;cursor:pointer;display:block;min-height:32px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.select2-container .select2-selection--multiple .select2-selection__rendered{display:inline-block;overflow:hidden;padding-left:8px;text-overflow:ellipsis;white-space:nowrap}.select2-container .select2-search--inline{float:left}.select2-container .select2-search--inline .select2-search__field{-webkit-box-sizing:border-box;box-sizing:border-box;border:none;font-size:100%;margin-top:5px;padding:0}.select2-container .select2-search--inline .select2-search__field::-webkit-search-cancel-button{-webkit-appearance:none}.select2-dropdown{background-color:#fff;border:1px solid #aaa;border-radius:4px;-webkit-box-sizing:border-box;box-sizing:border-box;display:block;position:absolute;left:-100000px;width:100%;z-index:1051}.select2-results{display:block}.select2-results__options{list-style:none;margin:0;padding:0}.select2-results__option{padding:6px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.select2-results__option[aria-selected]{cursor:pointer}.select2-container--open .select2-dropdown{left:0}.select2-container--open .select2-dropdown--above{border-bottom:none;border-bottom-left-radius:0;border-bottom-right-radius:0}.select2-container--open .select2-dropdown--below{border-top:none;border-top-left-radius:0;border-top-right-radius:0}.select2-search--dropdown{display:block;padding:4px}.select2-search--dropdown .select2-search__field{padding:4px;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.select2-search--dropdown .select2-search__field::-webkit-search-cancel-button{-webkit-appearance:none}.select2-search--dropdown.select2-search--hide{display:none}.select2-close-mask{border:0;margin:0;padding:0;display:block;position:fixed;left:0;top:0;min-height:100%;min-width:100%;height:auto;width:auto;opacity:0;z-index:99;background-color:#fff}.select2-hidden-accessible{border:0!important;clip:rect(0 0 0 0)!important;height:1px!important;margin:-1px!important;overflow:hidden!important;padding:0!important;position:absolute!important;width:1px!important}.select2-container--default .select2-selection--single{background-color:#fff;border:1px solid #aaa;border-radius:4px}.select2-container--default .select2-selection--single .select2-selection__rendered{color:#444;line-height:28px}.select2-container--default .select2-selection--single .select2-selection__clear{cursor:pointer;float:right;font-weight:700}.select2-container--default .select2-selection--single .select2-selection__placeholder{color:#999}.select2-container--default .select2-selection--single .select2-selection__placeholder__option{display:none}.select2-container--default .select2-selection--single .select2-selection__arrow{height:26px;position:absolute;top:1px;right:1px;width:20px}.select2-container--default .select2-selection--single .select2-selection__arrow b{border-color:#888 transparent;border-style:solid;border-width:5px 4px 0;height:0;left:50%;margin-left:-4px;margin-top:-2px;position:absolute;top:50%;width:0}.select2-container--default.select2-container--disabled .select2-selection--single{background-color:#eee;cursor:default}.select2-container--default.select2-container--disabled .select2-selection--single .select2-selection__clear{display:none}.select2-container--default.select2-container--open .select2-selection--single .select2-selection__arrow b{border-color:transparent transparent #888;border-width:0 4px 5px}.select2-container--default .select2-selection--multiple{background-color:#fff;border:1px solid #aaa;border-radius:4px;cursor:text}.select2-container--default .select2-selection--multiple .select2-selection__rendered{-webkit-box-sizing:border-box;box-sizing:border-box;list-style:none;margin:0;padding:0 5px;width:100%}.select2-container--default .select2-selection--multiple .select2-selection__rendered li{list-style:none}.select2-container--default .select2-selection--multiple .select2-selection__placeholder{color:#999;margin-top:5px;float:left}.select2-container--default .select2-selection--multiple .select2-selection__placeholder__option{display:none}.select2-container--default .select2-selection--multiple .select2-selection__clear{cursor:pointer;float:right;font-weight:700;margin-top:5px;margin-right:10px}.select2-container--default .select2-selection--multiple .select2-selection__choice{background-color:#e4e4e4;border:1px solid #aaa;border-radius:4px;cursor:default;float:left;margin-right:5px;margin-top:5px;padding:0 5px}.select2-container--default .select2-selection--multiple .select2-selection__choice__remove{color:#999;cursor:pointer;display:inline-block;font-weight:700;margin-right:2px}.select2-container--default .select2-selection--multiple .select2-selection__choice__remove:hover{color:#333}.select2-container--default.select2-container--focused .select2-selection--multiple{border:solid #000 1px;outline:0}.select2-container--default:not(.select2-container--open) .select2-focused .select2-selection--multiple,.select2-container--default:not(.select2-container--open) .select2-focused .select2-selection--single{border:solid #000 1px;outline:0}.select2-container--default.select2-container--disabled .select2-selection--multiple{background-color:#eee;cursor:default}.select2-container--default.select2-container--disabled .select2-selection__choice__remove{display:none}.select2-container--default.select2-container--open.select2-container--above .select2-selection--multiple,.select2-container--default.select2-container--open.select2-container--above .select2-selection--single{border-top-left-radius:0;border-top-right-radius:0}.select2-container--default.select2-container--open.select2-container--below .select2-selection--multiple,.select2-container--default.select2-container--open.select2-container--below .select2-selection--single{border-bottom-left-radius:0;border-bottom-right-radius:0}.select2-container--default .select2-search--dropdown .select2-search__field{border:1px solid #aaa}.select2-container--default .select2-search--inline .select2-search__field{background:0 0;border:none;outline:0;-webkit-box-shadow:none;box-shadow:none;-webkit-appearance:textfield}.select2-container--default .select2-results>.select2-results__options{max-height:200px;overflow-y:auto}.select2-container--default .select2-results__option[role=group]{padding:0}.select2-container--default .select2-results__option[aria-disabled=true]{color:#999}.select2-container--default .select2-results__option[aria-selected=true]{background-color:#ddd}.select2-container--default .select2-results__option .select2-results__option{padding-left:1em}.select2-container--default .select2-results__option .select2-results__option .select2-results__group{padding-left:0}.select2-container--default .select2-results__option .select2-results__option .select2-results__option{margin-left:-1em;padding-left:2em}.select2-container--default .select2-results__option .select2-results__option .select2-results__option .select2-results__option{margin-left:-2em;padding-left:3em}.select2-container--default .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option{margin-left:-3em;padding-left:4em}.select2-container--default .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option{margin-left:-4em;padding-left:5em}.select2-container--default .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option{margin-left:-5em;padding-left:6em}.select2-container--default .select2-results__option--highlighted[aria-selected]{background-color:#5897fb;color:#fff}.select2-container--default .select2-results__group{cursor:default;display:block;padding:6px;color:gray}select2.material{display:inline-block;width:300px}select2.material>.select2-container{padding-bottom:1.29688em;vertical-align:inherit}select2.material>.select2-container .selection{padding:.4375em 0;border-top:.84375em solid transparent;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;width:100%;height:auto}select2.material .select2-container--default .select2-selection--multiple,select2.material .select2-container--default .select2-selection--single{width:100%;border:0;border-radius:0;height:24px;-webkit-box-sizing:border-box;box-sizing:border-box}select2.material .select2-container--default .select2-selection--multiple::before,select2.material .select2-container--default .select2-selection--single::before{content:' ';display:block;position:absolute;bottom:1.65em;background-color:#ddd;height:1px;width:100%}select2.material .select2-container--default .select2-selection--multiple::after,select2.material .select2-container--default .select2-selection--single::after{content:' ';display:block;position:absolute;bottom:1.63em;background-color:#5a419e;height:2px;width:0%;left:50%;-webkit-transition:none;transition:none}select2.material .select2-container--default .select2-selection--multiple .select2-selection__rendered,select2.material .select2-container--default .select2-selection--single .select2-selection__rendered{padding-left:1px;line-height:inherit}select2.material .select2-container--default .select2-selection--multiple .select2-selection__placeholder,select2.material .select2-container--default .select2-selection--single .select2-selection__placeholder{display:block;color:rgba(0,0,0,.38);-webkit-transition:-webkit-transform .3s;transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s,-webkit-transform .3s;position:absolute;-webkit-transform-origin:0 21px;transform-origin:0 21px;left:0;top:20px}select2.material .select2-container--default .select2-container--open{left:0;bottom:1.6em}select2.material .select2-container--default .select2-selection__placeholder__option{-webkit-transform:translateY(-1.5em) scale(.75) perspective(100px) translateZ(.001px);transform:translateY(-1.5em) scale(.75) perspective(100px) translateZ(.001px);width:133.33333%}select2.material .select2-container--default .select2-selection__arrow{top:20px}select2.material .select2-container--default .select2-focused .select2-selection--multiple::after,select2.material .select2-container--default .select2-focused .select2-selection--single::after,select2.material .select2-container--default.select2-container--open .select2-selection--multiple::after,select2.material .select2-container--default.select2-container--open .select2-selection--single::after{-webkit-transition:width .3s cubic-bezier(.12,1,.77,1),left .3s cubic-bezier(.12,1,.77,1);transition:width .3s cubic-bezier(.12,1,.77,1),left .3s cubic-bezier(.12,1,.77,1);width:100%;left:0}select2.material .select2-container--default .select2-dropdown{border-radius:0;border:0;-webkit-box-shadow:0 5px 5px rgba(0,0,0,.5);box-shadow:0 5px 5px rgba(0,0,0,.5)}select2.material .select2-container--default .select2-results__option--highlighted[aria-selected],select2.material .select2-container--default .select2-results__option[aria-selected=true]{background-color:rgba(0,0,0,.04);color:#000}select2.material .select2-container--default .select2-results__option[aria-selected=true]{color:#ff5722}select2.material .select2-container--default.select2-container--disabled .select2-selection--multiple,select2.material .select2-container--default.select2-container--disabled .select2-selection--single{background-color:transparent}select2.material .select2-container--default.select2-container--disabled .select2-selection--multiple::before,select2.material .select2-container--default.select2-container--disabled .select2-selection--single::before{background-image:-webkit-gradient(linear,left top,right top,color-stop(0,rgba(0,0,0,.26)),color-stop(33%,rgba(0,0,0,.26)),color-stop(0,transparent));background-image:linear-gradient(to right,rgba(0,0,0,.26) 0,rgba(0,0,0,.26) 33%,transparent 0);background-size:4px 1px;background-repeat:repeat-x;background-color:transparent;background-position:0 bottom}select2.material.ng-invalid.ng-touched .select2-container--default .select2-selection--multiple::after,select2.material.ng-invalid.ng-touched .select2-container--default .select2-selection--multiple::before,select2.material.ng-invalid.ng-touched .select2-container--default .select2-selection--single::after,select2.material.ng-invalid.ng-touched .select2-container--default .select2-selection--single::before{background-color:red}select2.material:not(.select2-container--open) .select2-focused .select2-selection--multiple,select2.material:not(.select2-container--open) .select2-focused .select2-selection--single{border:0}select2.material .select2-subscript-wrapper{position:absolute;top:calc(100% - 1.72917em);font-size:75%}@supports (-moz-appearance:none){select2.material .select2-container--default .select2-selection--multiple,select2.material .select2-container--default .select2-selection--single{height:26px}}@supports (-ms-scroll-limit:0){select2.material .select2-container--default .select2-selection--multiple,select2.material .select2-container--default .select2-selection--single{height:25px}}.tree-default .tree-icon,.tree-default .tree-node,.tree-default-large .tree-icon,.tree-default-large .tree-node,.tree-default-small .tree-icon,.tree-default-small .tree-node{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAABlBMVEUAAAAdHRvEkCwcAAAAAXRSTlMAQObYZgAAABBJREFUCNdjYGBkgIDByQIABdAAEebbh+QAAAAASUVORK5CYII=)}.tree-default .tree-open>.tree-ocl,.tree-default-large .tree-open>.tree-ocl,.tree-default-small .tree-open>.tree-ocl{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAgMAAAAOFJJnAAAADFBMVEUAAAAmJiYdHRtVV1uUYpaUAAAAAXRSTlMAQObYZgAAAChJREFUGNNjAAImBmRAYxEBGCsASjNegDLYYQz5S0pKCiBGaADDQAMAVcIEESWBUowAAAAASUVORK5CYII=)}.tree-default .tree-closed>.tree-ocl,.tree-default-large .tree-closed>.tree-ocl,.tree-default-small .tree-closed>.tree-ocl{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAG1BMVEUAAAAdHRukpKT8+/vs7O2op6mYmZjn5+eAgok7pES4AAAAAXRSTlMAQObYZgAAACxJREFUKM9jgAJGBlxgyKlgYkQXCEAXcEIXMElAEzCuYAQD3CqcCNrCMAwAADRiAxcmiEALAAAAAElFTkSuQmCC)}.tree-default .tree-leaf>.tree-ocl,.tree-default-large .tree-leaf>.tree-ocl,.tree-default-small .tree-leaf>.tree-ocl{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAABlBMVEUAAAAdHRvEkCwcAAAAAXRSTlMAQObYZgAAABRJREFUCNdjYGBkgACqsUJDGKgHADdHALNBlbR9AAAAAElFTkSuQmCC)}.tree-default .tree-folder,.tree-default .tree-themeicon,.tree-default-large .tree-folder,.tree-default-large .tree-themeicon,.tree-default-small .tree-folder,.tree-default-small .tree-themeicon{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAOVBMVEUAAAAECgIJAAAEBATq2p0AAAD99tX37cbgyI2hjFX9+O3p157Js3vdzKfOwJK3oWfz3Lv67uHw0rdDZAqVAAAABnRSTlMAFglBaibAScseAAAAg0lEQVQ4y+2NWxbDIAgFTR+ggqDd/2ILpv3IUXaQ+Z3hkm5W2kRE+LX39QeABsEY9Vxg3QYAo82BYEJMtKkRgwBBqus4QPH7aIFNsHmnbAPsM+hG2Xr6dHZPRGvwSIpkMBDlnNfgOLSbIA2DpxKLZIXsbF54YASBF+8y+QchZ5ZurnwBoZgH/OIWzMIAAAAASUVORK5CYII=)}.tree-default-large>.tree-no-dots .tree-open>.tree-ocl,.tree-default-small>.tree-no-dots .tree-open>.tree-ocl,.tree-default>.tree-no-dots .tree-open>.tree-ocl{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAgMAAAAOFJJnAAAACVBMVEUAAAAmJiZVV1v6eooZAAAAAXRSTlMAQObYZgAAAB9JREFUGNNjoDcQgDECoDTjBCiDDcaQgjFCAxgGGgAAoDIC1z9iTfwAAAAASUVORK5CYII=)}.tree-default-large>.tree-no-dots .tree-closed>.tree-ocl,.tree-default-small>.tree-no-dots .tree-closed>.tree-ocl,.tree-default>.tree-no-dots .tree-closed>.tree-ocl{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEUAAACkpKT8+/vs7O2op6mYmZjn5+eAgokPr01lAAAAAXRSTlMAQObYZgAAACNJREFUKM9jGH6AEUPAAV3AEF1AOQBNQCmdkApDgrYwDAMAAG4QAlv/KBLeAAAAAElFTkSuQmCC)}.tree-default .tree-checkbox,.tree-default-large .tree-checkbox,.tree-default-small .tree-checkbox{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAMFBMVEUAAAClpaXx8vGkpKTf3+DU09Xs7O3o5+f29faop6nl5eXh4uL8+/uYmZjW1tnU1daZ67FlAAAAAnRSTlMA/bWfQ5kAAABySURBVCjPYxjUgNdQUFBY0PgCXIDZSQkI1A0QAklpShodJxACjMvK05SUmpAElu8uS0tCFljisqssTQlFwHs5qsA/l93lSUi2lIQ+cdmOLFAaChQpQhUIdXFCFfgaiiyQ0dHRcQbJpbyWM4Fg8gWGwQwAfB8nJd6M3AoAAAAASUVORK5CYII=)}.tree-default .tree-checkbox:hover,.tree-default-large .tree-checkbox:hover,.tree-default-small .tree-checkbox:hover{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAALVBMVEUAAADfn2XenWP35dP67uH9+O3x07j78un13sf459bhq2nz3Lv78uj8+/vezamHPKYmAAAAAnRSTlMA+bLyh4AAAAB2SURBVCjPYxjUgEkJDBQQAu3lQFCMJODi4h4aehVJwGTyFJfSUCQBS2NLoBqEAKNxs+UUlxpkgQ5jyyk+SAId2R3GM5EFLNJ2NFsiC1inZe9otkGyxSwtLbvDHFng3bO0tHYkAdfQ0NC7yC7VWgUEixQYBjMAAO/II2cJ8sNbAAAAAElFTkSuQmCC)}.tree-default .tree-checked>.tree-checkbox,.tree-default-large .tree-checked>.tree-checkbox,.tree-default-large.tree-checkbox-selection .tree-clicked>.tree-checkbox,.tree-default-small .tree-checked>.tree-checkbox,.tree-default-small.tree-checkbox-selection .tree-clicked>.tree-checkbox,.tree-default.tree-checkbox-selection .tree-clicked>.tree-checkbox{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAt1BMVEUAAAAEYBhYuC4xjSkPcRukpKTn5+fx8vHs7O3f3+D8+/s1rwEupQDC1Me4zL2py6KYmZgknAD29fbT09QqiR01lxsyqwCwxLawza2guqSXsZ+y6JGDloeg3oCR1nCI02F7x1puwktcrkRrzTRdxCpQwhUjihJKvQ9AtwUilgTW+LqkvKuo34qi2Id4kX+s8Hh1mHac426Gvm6Lz2yJ1WCC2E1iuUN41EJRozplxDc7jjQ/ohwslBG/LIMUAAAABXRSTlMANPv5Rcd7Gp0AAACvSURBVDjL7dHHEoIwFIVhUQlETIL03qu99/d/LoPjwhniOOz5t+dbJHMHfV2T+a9kBuCFySe0sngmEJsEhfhzd8sCeG8BCkjg+stg3AZetIlsUSSH3TEME661c8NLeoptEqdZdrt6gzZ45GWVJ+dSkiQdsR651ulUSYZh6Ehg/sJ8Tt9pSGQDwSlmNA1D8AOoTlHXmgkhZANFVRejO6Y7UJgAAgAwAk2Q/3+svo69AFzODdF0p54hAAAAAElFTkSuQmCC)}.tree-default .tree-checked>.tree-checkbox:hover,.tree-default-large .tree-checked>.tree-checkbox:hover,.tree-default-large.tree-checkbox-selection .tree-clicked>.tree-checkbox:hover,.tree-default-small .tree-checked>.tree-checkbox:hover,.tree-default-small.tree-checkbox-selection .tree-clicked>.tree-checkbox:hover,.tree-default.tree-checkbox-selection .tree-clicked>.tree-checkbox:hover{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAulBMVEUAAAAFYRhYuC4xjSkPcRsCXhnhq2n35dT67uH8+/v78uk1rwHFwJ0upQD9+O303cbenWM1lxsknADM18DJz7ipy6Kh3IKI1GEyqwDz3Lu/0bW5vJay6JGR1nB7x1qrmVVuwktcrkRmyDRdxCoqiR1QwhUjihJKvQ9AtwUilgTW+Lrw0rewza2wuY6o34qorois8Hic426Gvm6Lz2y3nFmcnFCC2E1iuUN41EJRozpvzjg7jjQ/ohwslBFWDj97AAAABnRSTlMAMfv5RTnLnnwWAAAArklEQVQ4y+3RxxKCMBCAYbAQhEiI9N6bvXff/7UMjgdnCONw57vuf9idZXpdydwPmRJwwuRL0TWOGvA1QdL0uXuiBfbeAaTQPFdfe6NmEPhbH/I8POwMw4jYxpwdXO/nEMIwTpL4dmQaxs+sKLPoUoiiiBXakgEmo1I0TRMrEvWK5Wv6gVVeoJ+5ymdEqgLQEiw2eVWlEKGWQLIsZ/iAgKDvgMjEVkENcf+f1evoDUT+Dm+6pJVnAAAAAElFTkSuQmCC)}.tree-default .tree-anchor>.tree-undetermined,.tree-default-large .tree-anchor>.tree-undetermined,.tree-default-small .tree-anchor>.tree-undetermined{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAeFBMVEUAAABaoVWlpaWop6mkpKTs7O0kmwDq6+s3rwbx8vHO48PP9q+a5md910hbrkPw8O/s7+yYmZi38Yyz74h0vVj29fbS58ZdxCpQvxjn5+ev3Jmf5m6Oy22C2E2wxbWluaW98ZWc1XuV41541EJozDFgxyxAtwUnngB7eEGDAAAAA3RSTlMA/v4qTNf2AAAAjElEQVQ4y+3RuRKDIBSF4RguKGgggixu2Zf3f0NhhvJS2PvVf3FmzumwVw/JOQHokQC4VeoaKWU5oIGYhHNORGhA6NPoNnq0EyVYUC/dbLTWxiw1Hgzrq4vmdSgFl+T9CbIUBP/1PvyaUiCbTOIjacUY+7OoHGQVGgC/V9nNAhaMnGZ8BPwskqWzDjttI4sIZBYNKAIAAAAASUVORK5CYII=)}.tree-default .tree-anchor>.tree-undetermined:hover,.tree-default-large .tree-anchor>.tree-undetermined:hover,.tree-default-small .tree-anchor>.tree-undetermined:hover{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAdVBMVEUAAABaoVXiq2n67uEkmwCZ5mV/2Ek2rgbO48O38Yz9+O378un78uj58+TS58bP9q/enWN0vVharkJgxyz37d736tmz74hQvxg1rwD35dSv3JmOy2141ELW+LqwxbWluaW98ZWq7Huc1Xui6W9erUZozDE5sAaOHva0AAAAAnRSTlMA/iyWEiMAAACCSURBVDjL7dFJEoIwEEBRk5bYJFFBMWFyHu5/RFsLKBbdRbHnrf/urxZzZXokYwLtLGyJt946zQUea9wRRPRsAI+Q7sntXAMbFE3yDCkJDR+ccpP83E0uBa0h7TsepCAeSfyUQlC8Nn+lGKh1RwhgCBQfuKvqXCwbVNBzlZ6etZjpC9oQB1pSrrQlAAAAAElFTkSuQmCC)}.tree-default .tree-file,.tree-default-large .tree-file,.tree-default-small .tree-file{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAM1BMVEUAAAA5OTkFCwN+fn51d3z+/P35+fkEBAQJAAD////8+/vy8/L29fbT09R0dnvu7u7n5+dChD+/AAAACXRSTlMAWhaA/f7+QQlUxaTBAAAAaUlEQVQ4y+3QQQ6AIAxEURFFmVLw/qcVTHXlkOhWX1h+2qTD77nRHxwNXGzS5rsBikbfnSAq8L0AoqoLCawo4khgABLM8fQ2QJyB+mgQYFggyYAERUxiK0L9HfiKJU9Nru4vuY6XdfiYHYSWBY/m/wWIAAAAAElFTkSuQmCC)!important}.tree-default-large>.tree-container-ul .tree-loading>.tree-ocl,.tree-default-small>.tree-container-ul .tree-loading>.tree-ocl,.tree-default>.tree-container-ul .tree-loading>.tree-ocl{background:url(data:image/gif;base64,R0lGODlhEAAQAPMAAP////Dw8IqKiuDg4EZGRnp6egAAAFhYWCQkJKysrL6+vhQUFJycnAQEBDY2NmhoaCH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAAEcRBIEOg7dWow0AiGMVCbNBhI0IjBqA2jYAgrnEkBMYPNcXymzEDXULhwQFwg4TjiNAKCj1GiBK5RAoFaul6tisItqAkIFgRnyzgpIBhmAWyQoLA5o4FDkWAM5E8TAQcFAAxUA3AlAwUjhxIKYyUKClURACH5BAkKAAAALAAAAAAQABAAAARwEEgQaHm1zjnICIgxDEuySYPhgM0QKtsICAaDLIxBbMGBBwvHxWDIaAYHlQyg+HwmgUDCc9JIEo9CAXaiRAOMw+PBrX69A4ZVEuVNDwNe4CkREBLgxEg2P8YHDwMKeE1sPAUMTCaCa2xqiiiNJ0snEQAh+QQJCgAAACwAAAAAEAAQAAAEchBIECgTtc453ggEEgROsklDc4DiYSjbBzBGEiYGAQxwUJQkgkDgMAwEBuPusTgMBihaEkYJKB4aicIgmCiGDOhpRE4UztQxuTpIZCWjTSDxwMgDMgmjoLD213gaMkdPH3lvAQwwTxR5cm47YnEnMWInEQAh+QQJCgAAACwAAAAAEAAQAAAEcBBIEChjtc45SggH8R3KJg2OFwaPUU4fwCxKqBgPNVDCMwSEwoVgCDAMi0on9TspEAaX5KPwbAa4X0DBSCR2psdi0SBdGOBNK+qgBAYKDWdAzwwEmM2nKeH+6h92GjFbgW+Dego7hHx6TTFuJiaQJhEAIfkECQoAAAAsAAAAABAAEAAABGYQSBBoKbXOOU4IhvEZyiYNhhcGC7l9QEGGjLFQA3UsCuhcK5kI0EkNNANFyMCQfBSeDcpxDAwY2JzJseRdCtpNa0mxHjdK6tmK1UiUIe31OKjCyGXc53OGvup5Vm4TgnmGJoSDExEAIfkECQoAAAAsAAAAABAAEAAABHgQSBCoUrXOGVIIQvEVwyYFhScIIFJy1fAM67AIVBkoyQAyl4JjhyBkFAKMJjA4GByvz8CzCRAYH+nAZwIwDgeCYLvVbBgIxOJBYX42Awej3KZLpgYDIerLfhYGTQYLGRl9HQYHADxVXG8IBgpdWW0AAwYMXVVLGxEAIfkECQoAAAAsAAAAABAAEAAABHMQSBDoGLXOGVQIDPMxwyaBWCIyRMlVgxCoA5FYFjYrF/N0hJ+F9zkNHouD6xPAbAKPBHOq2SQej4NsagIkCA5HgdIsTgYHafFzqQ4UBoPQMi08EAaowZHJYBYGAgZjb086gAN4Lk9MDQYXDTddJwd8FBsRACH5BAkKAAAALAAAAAAQABAAAARxEEgQ6Bi1zhlwUEoQJMMmfRj4PSVXDSE4PAqVdeJ1JUV3CDePplNwFFqi5CYgCCWfJoCiQE08NRvF4/CzeZY0Za6DHCAMvZPHYBAICAimgXADCNAIBKMNgG0GbAMLCwEOBi0bCQYhgx0INVElAVwZGxEAIfkECQoAAAAsAAAAABAAEAAABHMQSBBouHTqe8e4SqVRX+CZjChhpvkJg2VxtJKYQmqV4sU8jNgMMwkEabQRYCBo3pKjQWGasCgQig2MsyQYDMHVgLAQVAINg2NgQDASD4IR8agwsgKDwOFIgJdCEmwIAXwBBw2BEwmJAQgOJgRZSmdTZxoRACH5BAkKAAAALAAAAAAQABAAAARzEEgQaLh06sv5qBr1dYMCSlgwXspgWav3DYwJc2iQCLalnpQW57EoPkKAQWKpcBieBCSNwVPRFq5JgLFKEp69y8PBqAQQhseZsBQcAopDoZJwCQyMA0GxSIg0AwYOAXoBBQ5ZGgoIHwQEKg+JGxQCAmYaEQAh+QQJCgAAACwAAAAAEAAQAAAEbxBIEGi4dOrLe9XU4AWiNgxhV2KBYQijGCil4hqlNdDfVRiJjezyQBgfIMBOQTs0FotCcpkQiRIE1CRQ5SgPrtxF8EhUAg5DIUA4MBmPWYFRoQEYwMJj4AiSTAsEAXoBDFlTWQEPBz5aIGcMdBkTEQAh+QQJCgAAACwAAAAAEAAQAAAEcxBIEGi4dGq1xv2YBigGAgaeNgzAYSRfigWIIQyGEV9eNdQGRkKyq1gYDYXmFBA4CASBiLJaFRBYqQhV/SgOrElA0asECoaO8ZIQKMwuQeBRWCUYKKGPxVEI6g8sIUQOD00FAQmIUwOBhxcMYVsUCTAZExEAOw==) center center no-repeat}.tree-dark .tree-icon,.tree-dark .tree-node,.tree-dark-large .tree-icon,.tree-dark-large .tree-node,.tree-dark-small .tree-icon,.tree-dark-small .tree-node{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAABlBMVEUAAACZmZl+9SADAAAAAXRSTlMAQObYZgAAABBJREFUCNdjYGBkgIDByQIABdAAEebbh+QAAAAASUVORK5CYII=)}.tree-dark .tree-open>.tree-ocl,.tree-dark-large .tree-open>.tree-ocl,.tree-dark-small .tree-open>.tree-ocl{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAKlBMVEUAAAAAAAAAAAAAAAABAQEAAAD///+ZmZnq6urz8/P39/fs7OyPj494eHhHIC8fAAAABnRSTlMAMQw9JRhvHRdtAAAASElEQVQoz2OAAnYGXGDQqWAKQhNRTkHl85gloilIQxVgMoMKIBSgCjBZzZy5lh0EYApm7uieiKwioqOjowVZQEVQUNCJYdgBAHy/DL3ZF2vMAAAAAElFTkSuQmCC)}.tree-dark .tree-closed>.tree-ocl,.tree-dark-large .tree-closed>.tree-ocl,.tree-dark-small .tree-closed>.tree-ocl{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAKlBMVEUAAAAAAAAAAAAAAAABAQEAAAD///+ZmZn7+/v09PTs7Ozo6OiPj494eHjfLJDSAAAABnRSTlMADD0xJRh3IQ36AAAATElEQVQoz2OAAnYGXGCQqRAVRxNwU0QTMMsVQBNoU0QTSEsSQBNIU0QXyGEHAZiARUcHqgqLmU2oZljORLPFahGaO7wV0f0iwDDYAQCYOwtF7qY4LwAAAABJRU5ErkJggg==)}.tree-dark .tree-leaf>.tree-ocl,.tree-dark-large .tree-leaf>.tree-ocl,.tree-dark-small .tree-leaf>.tree-ocl{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAABlBMVEUAAACZmZl+9SADAAAAAXRSTlMAQObYZgAAABRJREFUCNdjYGBkgACqsUJDGKgHADdHALNBlbR9AAAAAElFTkSuQmCC)}.tree-dark .tree-folder,.tree-dark .tree-themeicon,.tree-dark-large .tree-folder,.tree-dark-large .tree-themeicon,.tree-dark-small .tree-folder,.tree-dark-small .tree-themeicon{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAPFBMVEUAAAAAAAABAQEAAAAAAAADAwMAAAD////q6ur39/fb29vQ0NDY2NjMzMzIyMjf39/u7u77+/vy8vLj4+O/iujGAAAAB3RSTlMAMSUMYU89vymfUAAAAHBJREFUOMvt0rsOgCAQRFF318ewgKD+/79qJEQj2NhY6Klvpprma4Rpw3Ib8LDjx4FQ1266nnYs5UB2s0SXgN4IJnM2lYGZI7I4mzKICJoFxDJAcDZzAZVArR8TbxX1BZ9UFxhY1CW6AFy9w4Gl+Z2tWcQHe8c9yhoAAAAASUVORK5CYII=)}.tree-dark-large>.tree-no-dots .tree-open>.tree-ocl,.tree-dark-small>.tree-no-dots .tree-open>.tree-ocl,.tree-dark>.tree-no-dots .tree-open>.tree-ocl{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAIVBMVEUAAAAAAAAAAAAAAAABAQEAAAD////q6urz8/P39/fs7OyA9wwZAAAABnRSTlMAMQw9JRhvHRdtAAAAPklEQVQoz2MYeoApCE1AOQVNgVkimoK0RDQFUAGEAlQBJsuOjokoCjqWVzUiC4SXl5eXIAuoCAoKOjEMOwAARCILoBTOb8gAAAAASUVORK5CYII=)}.tree-dark-large>.tree-no-dots .tree-closed>.tree-ocl,.tree-dark-small>.tree-no-dots .tree-closed>.tree-ocl,.tree-dark>.tree-no-dots .tree-closed>.tree-ocl{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAIVBMVEUAAAAAAAAAAAAAAAAAAAABAQH////7+/v39/fy8vLr6+sN7QgRAAAABnRSTlMADD0xGCVFoQlVAAAAQklEQVQoz2MYakBEAE0gTBFNwCxJAE2gTBFNIA2qBCGQpogukIIiYF5ejqrCoqMJ1QzLmWi2WC1Cc0eUIqZfBjsAAO4ACr4wbS2OAAAAAElFTkSuQmCC)}.tree-dark .tree-checkbox,.tree-dark-large .tree-checkbox,.tree-dark-small .tree-checkbox{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAKlBMVEUAAAAAAAAEBAQAAAADAwMAAADHx8e1tbX////p6en7+/v29vby8vLu7u75iqyAAAAACHRSTlMAMSsYTwalpEE5znUAAABOSURBVCjPYxhAEKwoCALKATABsw4waDOACWg4glV4KMAEJASgFH0FpARgFBRIC8AoKJARgFFQICsAo6BAE+IXT7hfzGeCwXQDzPAYPAAAXmcRA/R0ArQAAAAASUVORK5CYII=)}.tree-dark .tree-checked>.tree-checkbox,.tree-dark-large .tree-checked>.tree-checkbox,.tree-dark-large.tree-checkbox-selection .tree-clicked>.tree-checkbox,.tree-dark-small .tree-checked>.tree-checkbox,.tree-dark-small.tree-checkbox-selection .tree-clicked>.tree-checkbox,.tree-dark.tree-checkbox-selection .tree-clicked>.tree-checkbox{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAM1BMVEUAAAAAAAAAAAAAAAAAAAADAwMEBAQAAADHx8e1tbUAAAD////p6enz8/P39/f7+/vu7u5nZ34DAAAAC3RSTlMAMTwMGE8rBqWkYZ+r9QEAAACPSURBVDjL7ZJbDoMgEADdF2oXhfuftksogcA2PUCdL5cZQwhsf8bOATqB9zngQ0cOnoOg0n5HRNEwB6Dw+SJURAUvaF5V3KD5rwExVe9vUVaRqyfwAjH1qn7zg5RuI5l3g4R4FcyXaQ1uIMw5I9VpDS6wI0TzdVqDbEt20D5NhCjQkbjcBZ9x5OTf7+Fh5A1DkAXNMEdnOQAAAABJRU5ErkJggg==)}.tree-dark .tree-anchor>.tree-undetermined,.tree-dark-large .tree-anchor>.tree-undetermined,.tree-dark-small .tree-anchor>.tree-undetermined{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAPFBMVEUAAAAAAAACAgIAAAADAwMAAAAAAADHx8e1tbX////o6Oj09PTf39/7+/v29vbu7u7r6+vb29vj4+PY2NjViBtUAAAACXRSTlMAMSgYTwwGpaS/5xyAAAAAg0lEQVQ4y+3SywrDIBCF4Z5jbo5GTfr+79rpIo1xhC67aP6FoHwgOD7+rMkRZ3RTC9zs62bXAvoBZ4NnC+Ax8rhg1F0H0B+xD/AB+B1YU3iX1i7Q01Bkj7uUoNaCBGSJ23OLkoFkQQBFVERdiWBBvrxkNoDlMotCM81F6hb3/T/c1b0Ab2QGeI9mSMkAAAAASUVORK5CYII=)}.tree-dark .tree-file,.tree-dark-large .tree-file,.tree-dark-small .tree-file{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAALVBMVEUAAAAAAAAAAAAAAAABAQEAAAD////o6Ojj4+Pu7u7q6ury8vL7+/v4+Pj29vbvvQBpAAAABnRSTlMAMWF5JQzLGMnSAAAAXUlEQVQoz2MYVCBEEARcEQJuaSCQghAQAwskIgkkKykpmSViqKCuFpnLQC22BxECcjtnzpw5+yFCQHp5R3lH1UaEgGQxUIv5RISA1IqOjo6uhQgB93IQKMH0/iACAPMSJey2Xe5CAAAAAElFTkSuQmCC)}.tree-dark-large>.tree-container-ul .tree-loading>.tree-ocl,.tree-dark-small>.tree-container-ul .tree-loading>.tree-ocl,.tree-dark>.tree-container-ul .tree-loading>.tree-ocl{background:url(data:image/gif;base64,R0lGODlhEAAQAPMAADMzMzk5OWhoaEBAQImJiXBwcKqqqoCAgJiYmFhYWFBQUKCgoGBgYKenp4+Pj3h4eCH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAAEcRBIEOg7dWow0AiGMVCbNBhI0IjBqA2jYAgrnEkBMYPNcXymzEDXULhwQFwg4TjiNAKCj1GiBK5RAoFaul6tisItqAkIFgRnyzgpIBhmAWyQoLA5o4FDkWAM5E8TAQcFAAxUA3AlAwUjhxIKYyUKClURACH5BAkKAAAALAAAAAAQABAAAARwEEgQaHm1zjnICIgxDEuySYPhgM0QKtsICAaDLIxBbMGBBwvHxWDIaAYHlQyg+HwmgUDCc9JIEo9CAXaiRAOMw+PBrX69A4ZVEuVNDwNe4CkREBLgxEg2P8YHDwMKeE1sPAUMTCaCa2xqiiiNJ0snEQAh+QQJCgAAACwAAAAAEAAQAAAEchBIECgTtc453ggEEgROsklDc4DiYSjbBzBGEiYGAQxwUJQkgkDgMAwEBuPusTgMBihaEkYJKB4aicIgmCiGDOhpRE4UztQxuTpIZCWjTSDxwMgDMgmjoLD213gaMkdPH3lvAQwwTxR5cm47YnEnMWInEQAh+QQJCgAAACwAAAAAEAAQAAAEcBBIEChjtc45SggH8R3KJg2OFwaPUU4fwCxKqBgPNVDCMwSEwoVgCDAMi0on9TspEAaX5KPwbAa4X0DBSCR2psdi0SBdGOBNK+qgBAYKDWdAzwwEmM2nKeH+6h92GjFbgW+Dego7hHx6TTFuJiaQJhEAIfkECQoAAAAsAAAAABAAEAAABGYQSBBoKbXOOU4IhvEZyiYNhhcGC7l9QEGGjLFQA3UsCuhcK5kI0EkNNANFyMCQfBSeDcpxDAwY2JzJseRdCtpNa0mxHjdK6tmK1UiUIe31OKjCyGXc53OGvup5Vm4TgnmGJoSDExEAIfkECQoAAAAsAAAAABAAEAAABHgQSBCoUrXOGVIIQvEVwyYFhScIIFJy1fAM67AIVBkoyQAyl4JjhyBkFAKMJjA4GByvz8CzCRAYH+nAZwIwDgeCYLvVbBgIxOJBYX42Awej3KZLpgYDIerLfhYGTQYLGRl9HQYHADxVXG8IBgpdWW0AAwYMXVVLGxEAIfkECQoAAAAsAAAAABAAEAAABHMQSBDoGLXOGVQIDPMxwyaBWCIyRMlVgxCoA5FYFjYrF/N0hJ+F9zkNHouD6xPAbAKPBHOq2SQej4NsagIkCA5HgdIsTgYHafFzqQ4UBoPQMi08EAaowZHJYBYGAgZjb086gAN4Lk9MDQYXDTddJwd8FBsRACH5BAkKAAAALAAAAAAQABAAAARxEEgQ6Bi1zhlwUEoQJMMmfRj4PSVXDSE4PAqVdeJ1JUV3CDePplNwFFqi5CYgCCWfJoCiQE08NRvF4/CzeZY0Za6DHCAMvZPHYBAICAimgXADCNAIBKMNgG0GbAMLCwEOBi0bCQYhgx0INVElAVwZGxEAIfkECQoAAAAsAAAAABAAEAAABHMQSBBouHTqe8e4SqVRX+CZjChhpvkJg2VxtJKYQmqV4sU8jNgMMwkEabQRYCBo3pKjQWGasCgQig2MsyQYDMHVgLAQVAINg2NgQDASD4IR8agwsgKDwOFIgJdCEmwIAXwBBw2BEwmJAQgOJgRZSmdTZxoRACH5BAkKAAAALAAAAAAQABAAAARzEEgQaLh06sv5qBr1dYMCSlgwXspgWav3DYwJc2iQCLalnpQW57EoPkKAQWKpcBieBCSNwVPRFq5JgLFKEp69y8PBqAQQhseZsBQcAopDoZJwCQyMA0GxSIg0AwYOAXoBBQ5ZGgoIHwQEKg+JGxQCAmYaEQAh+QQJCgAAACwAAAAAEAAQAAAEbxBIEGi4dOrLe9XU4AWiNgxhV2KBYQijGCil4hqlNdDfVRiJjezyQBgfIMBOQTs0FotCcpkQiRIE1CRQ5SgPrtxF8EhUAg5DIUA4MBmPWYFRoQEYwMJj4AiSTAsEAXoBDFlTWQEPBz5aIGcMdBkTEQAh+QQJCgAAACwAAAAAEAAQAAAEcxBIEGi4dGq1xv2YBigGAgaeNgzAYSRfigWIIQyGEV9eNdQGRkKyq1gYDYXmFBA4CASBiLJaFRBYqQhV/SgOrElA0asECoaO8ZIQKMwuQeBRWCUYKKGPxVEI6g8sIUQOD00FAQmIUwOBhxcMYVsUCTAZExEAOw==) center center no-repeat}.tree-default .tree-icon,.tree-default .tree-node{background-repeat:no-repeat;background-color:transparent}.tree-default .tree-hovered{background:#e7f4f9;border-radius:2px;-webkit-box-shadow:inset 0 0 1px #ccc;box-shadow:inset 0 0 1px #ccc}.tree-default .tree-clicked{background:#beebff;border-radius:2px;-webkit-box-shadow:inset 0 0 1px #999;box-shadow:inset 0 0 1px #999}.tree-default .tree-no-icons .tree-anchor>.tree-themeicon{display:none}.tree-default .tree-disabled{background:0 0;color:#666}.tree-default .tree-disabled.tree-hovered{background:0 0;-webkit-box-shadow:none;box-shadow:none}.tree-default .tree-disabled.tree-clicked{background:#efefef}.tree-default .tree-search{font-style:italic;color:#8b0000;font-weight:700}.tree-default .tree-no-checkboxes .tree-checkbox{display:none!important}.tree-default.tree-checkbox-no-clicked .tree-clicked{background:0 0;-webkit-box-shadow:none;box-shadow:none}.tree-default.tree-checkbox-no-clicked .tree-clicked.tree-hovered{background:#e7f4f9}.tree-default .tree-node{min-height:24px;line-height:24px;margin-left:24px;min-width:24px}.tree-default .tree-icon{width:24px;height:24px;line-height:24px}.tree-default .tree-icon:empty{width:24px;height:24px;line-height:24px}.tree-default .tree-icon,.tree-default .tree-node{background-position:-4px -4px;background-repeat:repeat-y}.tree-default .tree-last{background:0 0}.tree-default .tree-open>.tree-ocl{background-position:-4px -4px}.tree-default .tree-closed>.tree-ocl{background-position:-4px -4px}.tree-default .tree-leaf>.tree-ocl{background-position:-4px -4px}.tree-default .tree-folder,.tree-default .tree-themeicon{background-position:-4px -4px}.tree-default>.tree-no-dots .tree-leaf>.tree-ocl,.tree-default>.tree-no-dots .tree-node{background:0 0}.tree-default>.tree-no-dots .tree-open>.tree-ocl{background-position:-4px -4px}.tree-default>.tree-no-dots .tree-closed>.tree-ocl{background-position:-4px -4px}.tree-default .tree-disabled{background:0 0}.tree-default .tree-disabled.tree-hovered{background:0 0}.tree-default .tree-disabled.tree-clicked{background:#efefef}.tree-default .tree-checkbox{background-position:-4px -4px}.tree-default .tree-checkbox:hover{background-position:-4px -4px}.tree-default .tree-checked>.tree-checkbox,.tree-default.tree-checkbox-selection .tree-clicked>.tree-checkbox{background-position:-4px -4px}.tree-default .tree-checked>.tree-checkbox:hover,.tree-default.tree-checkbox-selection .tree-clicked>.tree-checkbox:hover{background-position:-4px -4px}.tree-default .tree-anchor{line-height:24px;height:24px}.tree-default .tree-anchor>.tree-undetermined{background-position:-4px -4px}.tree-default .tree-anchor>.tree-undetermined:hover{background-position:-4px -4px}.tree-default .tree-themeicon-custom{background-color:transparent;background-repeat:no-repeat;background-image:none}.tree-default .tree-file{background-position:-4px -4px}.tree-default>.tree-container-ul>.tree-node{margin-left:0;margin-right:0}.tree-default .tree-marker-1{top:0}.tree-default .tree-marker-2{top:12px}.tree-default .tree-marker-3{top:24px}.tree-default .not-allowed{color:red}.tree-default .allowed{color:green}.tree-default-small .tree-node{min-height:18px;line-height:18px;margin-left:18px;min-width:18px}.tree-default-small .tree-icon{width:18px;height:18px;line-height:18px}.tree-default-small .tree-icon:empty{width:18px;height:18px;line-height:18px}.tree-default-small .tree-icon,.tree-default-small .tree-node{background-position:-7px -7px;background-repeat:repeat-y}.tree-default-small .tree-last{background:0 0}.tree-default-small .tree-open>.tree-ocl{background-position:-7px -7px}.tree-default-small .tree-closed>.tree-ocl{background-position:-7px -7px}.tree-default-small .tree-leaf>.tree-ocl{background-position:-7px -7px}.tree-default-small .tree-folder,.tree-default-small .tree-themeicon{background-position:-7px -7px}.tree-default-small>.tree-no-dots .tree-leaf>.tree-ocl,.tree-default-small>.tree-no-dots .tree-node{background:0 0}.tree-default-small>.tree-no-dots .tree-open>.tree-ocl{background-position:-7px -7px}.tree-default-small>.tree-no-dots .tree-closed>.tree-ocl{background-position:-7px -7px}.tree-default-small .tree-disabled{background:0 0}.tree-default-small .tree-disabled.tree-hovered{background:0 0}.tree-default-small .tree-disabled.tree-clicked{background:#efefef}.tree-default-small .tree-checkbox{background-position:-7px -7px}.tree-default-small .tree-checkbox:hover{background-position:-7px -7px}.tree-default-small .tree-checked>.tree-checkbox,.tree-default-small.tree-checkbox-selection .tree-clicked>.tree-checkbox{background-position:-7px -7px}.tree-default-small .tree-checked>.tree-checkbox:hover,.tree-default-small.tree-checkbox-selection .tree-clicked>.tree-checkbox:hover{background-position:-7px -7px}.tree-default-small .tree-anchor{line-height:18px;height:18px}.tree-default-small .tree-anchor>.tree-undetermined{background-position:-7px -7px}.tree-default-small .tree-anchor>.tree-undetermined:hover{background-position:-7px -7px}.tree-default-small .tree-themeicon-custom{background-color:transparent;background-repeat:no-repeat;background-image:none}.tree-default-small .tree-file{background-position:-7px -7px}.tree-default-small>.tree-container-ul>.tree-node{margin-left:0;margin-right:0}.tree-default-small .tree-marker-1{top:0}.tree-default-small .tree-marker-2{top:9px}.tree-default-small .tree-marker-3{top:18px}.tree-default-small .not-allowed{color:red}.tree-default-small .allowed{color:green}.tree-default-large .tree-node{min-height:32px;line-height:32px;margin-left:32px;min-width:32px}.tree-default-large .tree-icon{width:32px;height:32px;line-height:32px}.tree-default-large .tree-icon:empty{width:32px;height:32px;line-height:32px}.tree-default-large .tree-icon,.tree-default-large .tree-node{background-position:0 0;background-repeat:repeat-y}.tree-default-large .tree-last{background:0 0}.tree-default-large .tree-open>.tree-ocl{background-position:0 0}.tree-default-large .tree-closed>.tree-ocl{background-position:0 0}.tree-default-large .tree-leaf>.tree-ocl{background-position:0 0}.tree-default-large .tree-folder,.tree-default-large .tree-themeicon{background-position:0 0}.tree-default-large>.tree-no-dots .tree-leaf>.tree-ocl,.tree-default-large>.tree-no-dots .tree-node{background:0 0}.tree-default-large>.tree-no-dots .tree-open>.tree-ocl{background-position:0 0}.tree-default-large>.tree-no-dots .tree-closed>.tree-ocl{background-position:0 0}.tree-default-large .tree-disabled{background:0 0}.tree-default-large .tree-disabled.tree-hovered{background:0 0}.tree-default-large .tree-disabled.tree-clicked{background:#efefef}.tree-default-large .tree-checkbox{background-position:0 0}.tree-default-large .tree-checkbox:hover{background-position:0 0}.tree-default-large .tree-checked>.tree-checkbox,.tree-default-large.tree-checkbox-selection .tree-clicked>.tree-checkbox{background-position:0 0}.tree-default-large .tree-checked>.tree-checkbox:hover,.tree-default-large.tree-checkbox-selection .tree-clicked>.tree-checkbox:hover{background-position:0 0}.tree-default-large .tree-anchor{line-height:32px;height:32px}.tree-default-large .tree-anchor>.tree-undetermined{background-position:0 0}.tree-default-large .tree-anchor>.tree-undetermined:hover{background-position:0 0}.tree-default-large .tree-themeicon-custom{background-color:transparent;background-repeat:no-repeat;background-image:none}.tree-default-large .tree-file{background-position:0 0}.tree-default-large>.tree-container-ul>.tree-node{margin-left:0;margin-right:0}.tree-default-large .tree-marker-1{top:0}.tree-default-large .tree-marker-2{top:16px}.tree-default-large .tree-marker-3{top:32px}.tree-default-large .not-allowed{color:red}.tree-default-large .allowed{color:green}.tree-default .tree-checkbox-disabled,.tree-default .tree-disabled>.tree-icon,.tree-default-large .tree-checkbox-disabled,.tree-default-large .tree-disabled>.tree-icon,.tree-default-small .tree-checkbox-disabled,.tree-default-small .tree-disabled>.tree-icon{opacity:.8;filter:url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'tree-grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#tree-grayscale");filter:gray;-webkit-filter:grayscale(100%)}.tree-dark .tree-icon,.tree-dark .tree-node{background-repeat:no-repeat;background-color:transparent}.tree-dark .tree-hovered{background:#555;border-radius:2px;-webkit-box-shadow:inset 0 0 1px #555;box-shadow:inset 0 0 1px #555}.tree-dark .tree-clicked{background:#5fa2db;border-radius:2px;-webkit-box-shadow:inset 0 0 1px #666;box-shadow:inset 0 0 1px #666}.tree-dark .tree-no-icons .tree-anchor>.tree-themeicon{display:none}.tree-dark .tree-disabled{background:0 0;color:#666}.tree-dark .tree-disabled.tree-hovered{background:0 0;-webkit-box-shadow:none;box-shadow:none}.tree-dark .tree-disabled.tree-clicked{background:#333}.tree-dark .tree-search{font-style:italic;color:#fff;font-weight:700}.tree-dark .tree-no-checkboxes .tree-checkbox{display:none!important}.tree-dark.tree-checkbox-no-clicked .tree-clicked{background:0 0;-webkit-box-shadow:none;box-shadow:none}.tree-dark.tree-checkbox-no-clicked .tree-clicked.tree-hovered{background:#555}.tree-dark .tree-node{min-height:24px;line-height:24px;margin-left:24px;min-width:24px}.tree-dark .tree-icon{width:24px;height:24px;line-height:24px}.tree-dark .tree-icon:empty{width:24px;height:24px;line-height:24px}.tree-dark .tree-icon,.tree-dark .tree-node{background-position:-4px -4px;background-repeat:repeat-y}.tree-dark .tree-last{background:0 0}.tree-dark .tree-open>.tree-ocl{background-position:-4px -4px}.tree-dark .tree-closed>.tree-ocl{background-position:-4px -4px}.tree-dark .tree-leaf>.tree-ocl{background-position:-4px -4px}.tree-dark .tree-folder,.tree-dark .tree-themeicon{background-position:-4px -4px}.tree-dark>.tree-no-dots .tree-leaf>.tree-ocl,.tree-dark>.tree-no-dots .tree-node{background:0 0}.tree-dark>.tree-no-dots .tree-open>.tree-ocl{background-position:-4px -4px}.tree-dark>.tree-no-dots .tree-closed>.tree-ocl{background-position:-4px -4px}.tree-dark .tree-disabled{background:0 0}.tree-dark .tree-disabled.tree-hovered{background:0 0}.tree-dark .tree-disabled.tree-clicked{background:#efefef}.tree-dark .tree-checkbox{background-position:-4px -4px}.tree-dark .tree-checkbox:hover{background-position:-4px -4px}.tree-dark .tree-checked>.tree-checkbox,.tree-dark.tree-checkbox-selection .tree-clicked>.tree-checkbox{background-position:-4px -4px}.tree-dark .tree-checked>.tree-checkbox:hover,.tree-dark.tree-checkbox-selection .tree-clicked>.tree-checkbox:hover{background-position:-4px -4px}.tree-dark .tree-anchor{line-height:24px;height:24px}.tree-dark .tree-anchor>.tree-undetermined{background-position:-4px -4px}.tree-dark .tree-anchor>.tree-undetermined:hover{background-position:-4px -4px}.tree-dark .tree-themeicon-custom{background-color:transparent;background-repeat:no-repeat;background-image:none}.tree-dark .tree-file{background-position:-4px -4px}.tree-dark>.tree-container-ul>.tree-node{margin-left:0;margin-right:0}.tree-dark .tree-marker-1{top:0}.tree-dark .tree-marker-2{top:12px}.tree-dark .tree-marker-3{top:24px}.tree-dark .not-allowed{color:red}.tree-dark .allowed{color:green}.tree-dark-small .tree-node{min-height:18px;line-height:18px;margin-left:18px;min-width:18px}.tree-dark-small .tree-icon{width:18px;height:18px;line-height:18px}.tree-dark-small .tree-icon:empty{width:18px;height:18px;line-height:18px}.tree-dark-small .tree-icon,.tree-dark-small .tree-node{background-position:-7px -7px;background-repeat:repeat-y}.tree-dark-small .tree-last{background:0 0}.tree-dark-small .tree-open>.tree-ocl{background-position:-7px -7px}.tree-dark-small .tree-closed>.tree-ocl{background-position:-7px -7px}.tree-dark-small .tree-leaf>.tree-ocl{background-position:-7px -7px}.tree-dark-small .tree-folder,.tree-dark-small .tree-themeicon{background-position:-7px -7px}.tree-dark-small>.tree-no-dots .tree-leaf>.tree-ocl,.tree-dark-small>.tree-no-dots .tree-node{background:0 0}.tree-dark-small>.tree-no-dots .tree-open>.tree-ocl{background-position:-7px -7px}.tree-dark-small>.tree-no-dots .tree-closed>.tree-ocl{background-position:-7px -7px}.tree-dark-small .tree-disabled{background:0 0}.tree-dark-small .tree-disabled.tree-hovered{background:0 0}.tree-dark-small .tree-disabled.tree-clicked{background:#efefef}.tree-dark-small .tree-checkbox{background-position:-7px -7px}.tree-dark-small .tree-checkbox:hover{background-position:-7px -7px}.tree-dark-small .tree-checked>.tree-checkbox,.tree-dark-small.tree-checkbox-selection .tree-clicked>.tree-checkbox{background-position:-7px -7px}.tree-dark-small .tree-checked>.tree-checkbox:hover,.tree-dark-small.tree-checkbox-selection .tree-clicked>.tree-checkbox:hover{background-position:-7px -7px}.tree-dark-small .tree-anchor{line-height:18px;height:18px}.tree-dark-small .tree-anchor>.tree-undetermined{background-position:-7px -7px}.tree-dark-small .tree-anchor>.tree-undetermined:hover{background-position:-7px -7px}.tree-dark-small .tree-themeicon-custom{background-color:transparent;background-repeat:no-repeat;background-image:none}.tree-dark-small .tree-file{background-position:-7px -7px}.tree-dark-small>.tree-container-ul>.tree-node{margin-left:0;margin-right:0}.tree-dark-small .tree-marker-1{top:0}.tree-dark-small .tree-marker-2{top:9px}.tree-dark-small .tree-marker-3{top:18px}.tree-dark-small .not-allowed{color:red}.tree-dark-small .allowed{color:green}.tree-dark-large .tree-node{min-height:32px;line-height:32px;margin-left:32px;min-width:32px}.tree-dark-large .tree-icon{width:32px;height:32px;line-height:32px}.tree-dark-large .tree-icon:empty{width:32px;height:32px;line-height:32px}.tree-dark-large .tree-icon,.tree-dark-large .tree-node{background-position:0 0;background-repeat:repeat-y}.tree-dark-large .tree-last{background:0 0}.tree-dark-large .tree-open>.tree-ocl{background-position:0 0}.tree-dark-large .tree-closed>.tree-ocl{background-position:0 0}.tree-dark-large .tree-leaf>.tree-ocl{background-position:0 0}.tree-dark-large .tree-folder,.tree-dark-large .tree-themeicon{background-position:0 0}.tree-dark-large>.tree-no-dots .tree-leaf>.tree-ocl,.tree-dark-large>.tree-no-dots .tree-node{background:0 0}.tree-dark-large>.tree-no-dots .tree-open>.tree-ocl{background-position:0 0}.tree-dark-large>.tree-no-dots .tree-closed>.tree-ocl{background-position:0 0}.tree-dark-large .tree-disabled{background:0 0}.tree-dark-large .tree-disabled.tree-hovered{background:0 0}.tree-dark-large .tree-disabled.tree-clicked{background:#efefef}.tree-dark-large .tree-checkbox{background-position:0 0}.tree-dark-large .tree-checkbox:hover{background-position:0 0}.tree-dark-large .tree-checked>.tree-checkbox,.tree-dark-large.tree-checkbox-selection .tree-clicked>.tree-checkbox{background-position:0 0}.tree-dark-large .tree-checked>.tree-checkbox:hover,.tree-dark-large.tree-checkbox-selection .tree-clicked>.tree-checkbox:hover{background-position:0 0}.tree-dark-large .tree-anchor{line-height:32px;height:32px}.tree-dark-large .tree-anchor>.tree-undetermined{background-position:0 0}.tree-dark-large .tree-anchor>.tree-undetermined:hover{background-position:0 0}.tree-dark-large .tree-themeicon-custom{background-color:transparent;background-repeat:no-repeat;background-image:none}.tree-dark-large .tree-file{background-position:0 0}.tree-dark-large>.tree-container-ul>.tree-node{margin-left:0;margin-right:0}.tree-dark-large .tree-marker-1{top:0}.tree-dark-large .tree-marker-2{top:16px}.tree-dark-large .tree-marker-3{top:32px}.tree-dark-large .not-allowed{color:red}.tree-dark-large .allowed{color:green}.tree-dark .tree-checkbox-disabled,.tree-dark .tree-disabled>.tree-icon,.tree-dark-large .tree-checkbox-disabled,.tree-dark-large .tree-disabled>.tree-icon,.tree-dark-small .tree-checkbox-disabled,.tree-dark-small .tree-disabled>.tree-icon{opacity:.8;filter:url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'tree-grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#tree-grayscale");filter:gray;-webkit-filter:grayscale(100%)}.tree-children,.tree-container-ul,.tree-node{display:block;margin:0;padding:0;list-style-type:none;list-style-image:none}.tree-node{white-space:nowrap}.tree-anchor{display:inline-block;color:#000;white-space:nowrap;padding:0 4px 0 1px;margin:0;vertical-align:top;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.tree-anchor:focus{outline:0}.tree-anchor,.tree-anchor:active,.tree-anchor:hover,.tree-anchor:link,.tree-anchor:visited{text-decoration:none;color:inherit}.tree-icon{display:inline-block;text-decoration:none;margin:0;padding:0;vertical-align:top;text-align:center}.tree-icon:empty{display:inline-block;text-decoration:none;margin:0;padding:0;vertical-align:top;text-align:center}.tree-ocl{cursor:pointer}.tree-leaf>.tree-ocl{cursor:default}.tree .tree-open>.tree-children{display:block}.tree .tree-closed>.tree-children,.tree .tree-leaf>.tree-children{display:none}.tree-anchor>.tree-themeicon{margin-right:2px}.tree-anchor>.tree-themeicon-hidden,.tree-no-icons .tree-themeicon{display:none}.tree-hidden,.tree-node.tree-hidden{display:none}.tree-relative{position:relative}.tree-marker-1,.tree-marker-2,.tree-marker-3{left:0;position:absolute;margin:-5px 0 0 0;padding:0;border-right:0;border-top:5px solid transparent;border-bottom:5px solid transparent;border-left:5px solid;width:0;height:0;font-size:0;line-height:0}.tree-dark{background:#333}.tree-dark .tree-anchor{color:#999;text-shadow:1px 1px 0 rgba(0,0,0,.5)}.tree-dark .tree-checked,.tree-dark .tree-clicked{color:#fff}.tree-dark .tree-hovered{color:#fff}.tree-dark .tree-marker-1,.tree-dark .tree-marker-2,.tree-dark .tree-marker-3{border-left-color:#999;background:0 0}.tree-dark .tree-anchor>.tree-icon{opacity:.75}.tree-dark .tree-checked>.tree-icon,.tree-dark .tree-clicked>.tree-icon,.tree-dark .tree-hovered>.tree-icon{opacity:1}.tree-dark.tree-rtl .tree-node{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAACAQMAAAB49I5GAAAABlBMVEUAAACZmZl+9SADAAAAAXRSTlMAQObYZgAAAAxJREFUCNdjAAMOBgAAGAAJMwQHdQAAAABJRU5ErkJggg==)}.tree-dark.tree-rtl .tree-last{background:0 0}.tree-dark-small.tree-rtl .tree-node{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAACAQMAAABv1h6PAAAABlBMVEUAAACZmZl+9SADAAAAAXRSTlMAQObYZgAAAAxJREFUCNdjAAMHBgAAiABBI4gz9AAAAABJRU5ErkJggg==)}.tree-dark-small.tree-rtl .tree-last{background:0 0}.tree-dark-large.tree-rtl .tree-node{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAACAQMAAAAD0EyKAAAABlBMVEUAAACZmZl+9SADAAAAAXRSTlMAQObYZgAAAAxJREFUCNdjgIIGBgABCgCBvVLXcAAAAABJRU5ErkJggg==)}.tree-dark-large.tree-rtl .tree-last{background:0 0}
</style>
<a class="github-fork-ribbon right-top" data-ribbon="Fork me on GitHub" href="https://github.com/plantain-00/template-editor-demo" title="Fork me on GitHub" target="_blank" rel="noopener">Fork me on GitHub</a>
<div id="prerender-container">
<div id="container"></div>
</div>
<script src="vendor.bundle-5fc566579b307ce0c68e28eca23d894d.js" crossOrigin="anonymous" integrity="sha256-IJTZ1vFyNl2wopLeJXI30qVFD4YK4hqNH82k6rffFvw="></script>
<script>
!function(e){function t(t){for(var i,s,o=t[0],c=t[1],l=t[2],u=0,d=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&d.push(a[s][0]),a[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);for(p&&p(t);d.length;)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(i=!1)}i&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},a={0:0},r=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var o=window.webpackJsonp=window.webpackJsonp||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var p=c;r.push([62,1]),n()}({62:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n(1),r=n(2);n(22);function s(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{display:"flex","align-items":"center",height:"50px"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.styleGuideKey,expression:"styleGuideKey"}],attrs:{type:"text"},domProps:{value:e.styleGuideKey},on:{input:function(t){t.target.composing||(e.styleGuideKey=t.target.value)}}}),e._v(" "),n("button",{on:{click:function(t){return e.loadStyleGuide()}}},[e._v("load style guide")]),e._v(" "),n("button",{on:{click:function(t){return e.saveStyleGuide()}}},[e._v("save style guide")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.templateModelKey,expression:"templateModelKey"}],attrs:{type:"text"},domProps:{value:e.templateModelKey},on:{input:function(t){t.target.composing||(e.templateModelKey=t.target.value)}}}),e._v(" "),n("button",{on:{click:function(t){return e.loadTemplateModel()}}},[e._v("load template model")]),e._v(" "),n("button",{on:{click:function(t){return e.saveTemplateModel()}}},[e._v("save template model")]),e._v(" "),n("button",{on:{click:function(t){return e.editTemplateModel()}}},[e._v("edit template model")]),e._v(" "),n("button",{on:{click:function(t){return e.precompile()}}},[e._v("precompile")]),e._v(" "),n("button",{on:{click:function(t){return e.generate()}}},[e._v(e._s(e.appState.graphicCanvasState?"back to template":"generate graphic"))])])}var o=[];function c(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{display:"flex","flex-direction":"column"}},[n("div",{staticStyle:{height:"50px"}},[n("app-panel",{attrs:{appState:e.appState}}),e._v(" "),n("template-model-editor",{attrs:{appState:e.appState}})],1),e._v(" "),e.appState.graphicCanvasState?n("template-editor",{attrs:{canvasState:e.appState.graphicCanvasState}}):e._e(),e._v(" "),n("template-editor",{directives:[{name:"show",rawName:"v-show",value:!e.appState.graphicCanvasState,expression:"!appState.graphicCanvasState"}],attrs:{canvasState:e.appState.canvasState}})],1)}var l=[];function p(){var e=this.$createElement,t=this._self._c||e;return this.canvasState.collectionEditorVisible?t("div",{style:this.editorStyle},[t("textarea",{staticStyle:{width:"calc(100% - 40px)",height:"400px","margin-left":"20px","margin-right":"20px"},domProps:{value:this.collection},on:{blur:this.changeCollection}})]):this._e()}var u=[];function d(){var e=this,t=e.$createElement,n=e._self._c||t;return e.canvasState.contextMenuEnabled?n("div",{on:{click:e.close}},[n("div",{style:e.maskStyle}),e._v(" "),n("div",{style:e.contextMenuStyle},[n("button",{on:{click:e.remove}},[e._v("remove")])])]):e._e()}var h=[];function y(){var e=this.$createElement,t=this._self._c||e;return this.canvasState.isDraggingForSelection?t("div",{style:this.draggingAreaStyle}):this._e()}var v=[];function f(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{style:e.editorStyle},[n("json-editor",{attrs:{schema:e.schema,"initial-value":e.ast},on:{"update-value":function(t){return e.updateValue(t)}}})],1)}var g=[];function m(){var e=this.$createElement,t=this._self._c||e;return t("div",{style:this.canvasStyle},[t("div",{style:this.styleGuideStyle},[this.hoverStyle?t("div",{style:this.hoverStyle}):this._e()])])}var x=[];function b(){var e=this.$createElement;return(this._self._c||e)("div",{style:this.maskStyle,attrs:{tabindex:"0"},on:{wheel:this.wheel,mousedown:this.mousedown,mouseup:this.mouseup,mousemove:this.mousemove,contextmenu:this.contextmenu,keydown:this.keydown}})}var S=[];function O(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{style:e.panelStyle},["content"===e.canvasState.selection.kind?n("div",["text"===e.canvasState.selection.content.kind?n("div",[e._v("\n      text\n      "),n("expression-input",{attrs:{canvasState:e.canvasState,literal:e.canvasState.selection.content.text,literalType:"text",expression:e.canvasState.selection.content.textExpression,expressionId:e.canvasState.selection.content.textExpressionId},on:{change:e.changeTextExpression}}),e._v(" "),n("br"),e._v("\n      font family\n      "),n("input",{attrs:{type:"text"},domProps:{value:e.canvasState.selection.content.fontFamily},on:{change:e.changeFontFamily}}),e._v(" "),n("br"),e._v("\n      font size\n      "),n("expression-input",{attrs:{canvasState:e.canvasState,literal:e.canvasState.selection.content.fontSize,literalType:"number",expression:e.canvasState.selection.content.fontSizeExpression,expressionId:e.canvasState.selection.content.fontSizeExpressionId},on:{change:e.changeFontSizeExpression}}),e._v(" "),n("br"),e._v("\n      color\n      "),n("expression-input",{attrs:{canvasState:e.canvasState,literal:e.canvasState.selection.content.color,literalType:"color",expression:e.canvasState.selection.content.colorExpression,expressionId:e.canvasState.selection.content.colorExpressionId},on:{change:e.changeColorExpression}})],1):e._e(),e._v(" "),"image"===e.canvasState.selection.content.kind?n("div",[e._v("\n      url\n      "),n("expression-input",{attrs:{canvasState:e.canvasState,literal:e.canvasState.selection.content.url,literalType:"text",expression:e.canvasState.selection.content.urlExpression,expressionId:e.canvasState.selection.content.urlExpressionId},on:{change:e.changeImageUrlExpression}}),e._v(" "),n("div",[e._v("\n        opacity\n        "),n("input",{attrs:{type:"number"},domProps:{value:e.canvasState.selection.content.opacity},on:{change:e.changeOpacity}})])],1):e._e(),e._v(" "),"color"===e.canvasState.selection.content.kind?n("div",[e._v("\n      color\n      "),n("expression-input",{attrs:{canvasState:e.canvasState,literal:e.canvasState.selection.content.color,literalType:"color",expression:e.canvasState.selection.content.colorExpression,expressionId:e.canvasState.selection.content.colorExpressionId},on:{change:e.changeColorExpression}})],1):e._e(),e._v(" "),n("div",[e._v("\n      x\n      "),n("expression-input",{attrs:{canvasState:e.canvasState,literal:e.canvasState.selection.content.x,literalType:"number",expression:e.canvasState.selection.content.xExpression,expressionId:e.canvasState.selection.content.xExpressionId},on:{change:function(t){return e.changePositionExpression(t,"x")}}})],1),e._v(" "),n("div",[e._v("\n      y\n      "),n("expression-input",{attrs:{canvasState:e.canvasState,literal:e.canvasState.selection.content.y,literalType:"number",expression:e.canvasState.selection.content.yExpression,expressionId:e.canvasState.selection.content.yExpressionId},on:{change:function(t){return e.changePositionExpression(t,"y")}}})],1),e._v(" "),n("div",[e._v("\n      z\n      "),n("expression-input",{attrs:{canvasState:e.canvasState,literal:e.canvasState.selection.content.z,literalType:"number",expression:e.canvasState.selection.content.zExpression,expressionId:e.canvasState.selection.content.zExpressionId},on:{change:function(t){return e.changePositionExpression(t,"z")}}})],1),e._v(" "),"text"===e.canvasState.selection.content.kind||"image"===e.canvasState.selection.content.kind||"color"===e.canvasState.selection.content.kind?n("div",[n("div",[e._v("\n        width\n        "),n("expression-input",{attrs:{canvasState:e.canvasState,literal:e.canvasState.selection.content.width,literalType:"number",expression:e.canvasState.selection.content.widthExpression,expressionId:e.canvasState.selection.content.widthExpressionId},on:{change:function(t){return e.changeSizeExpression(t,"width")}}})],1),e._v(" "),n("div",[e._v("\n        height\n        "),n("expression-input",{attrs:{canvasState:e.canvasState,literal:e.canvasState.selection.content.height,literalType:"number",expression:e.canvasState.selection.content.heightExpression,expressionId:e.canvasState.selection.content.heihtExpressionId},on:{change:function(t){return e.changeSizeExpression(t,"height")}}})],1)]):e._e(),e._v(" "),n("div",[e._v("\n      rotate\n      "),n("expression-input",{attrs:{canvasState:e.canvasState,literal:e.canvasState.selection.content.rotate,literalType:"number",expression:e.canvasState.selection.content.rotateExpression,expressionId:e.canvasState.selection.content.rotateExpressionId},on:{change:function(t){return e.changeRotateExpression(t)}}})],1),e._v(" "),n("div",[e._v("\n      hidden\n      "),n("input",{attrs:{type:"checkbox"},domProps:{checked:e.canvasState.selection.content.hidden},on:{change:e.changeHidden}})]),e._v(" "),n("div",[n("select",{domProps:{value:e.canvasState.selection.content.else?"true":"false"},on:{change:e.changeElse}},[n("option",{attrs:{value:"false"}},[e._v("if")]),e._v(" "),n("option",{attrs:{value:"true"}},[e._v("else if")])]),e._v(" "),n("expression-input",{attrs:{canvasState:e.canvasState,expression:e.canvasState.selection.content.if,expressionId:e.canvasState.selection.content.ifId},on:{change:e.changeIf}})],1),e._v(" "),n("div",[e._v("\n      repeat\n      "),n("expression-input",{attrs:{canvasState:e.canvasState,expression:e.repeat.expression,expressionId:e.canvasState.selection.content.repeatId},on:{change:e.changeRepeatExpression}}),e._v(" "),n("input",{staticStyle:{width:"150px","margin-left":"25px"},attrs:{type:"text",placeholder:"item name"},domProps:{value:e.repeat.itemName},on:{change:e.changeRepeatItemName}}),e._v(" "),n("input",{staticStyle:{width:"50px"},attrs:{type:"text",placeholder:"index name"},domProps:{value:e.repeat.indexName},on:{change:e.changeRepeatIndexName}})],1),e._v(" "),"reference"===e.canvasState.selection.content.kind?n("div",[e._v("\n      props\n      "),n("span",{staticStyle:{opacity:"0.5"}},[e._v(e._s(e.canvasState.selection.content.props))]),e._v(" "),e.parameters?n("div",{staticStyle:{"margin-left":"10px"}},e._l(e.parameters,(function(t){return n("div",[e._v("\n          "+e._s(t)+"\n          "),n("expression-input",{attrs:{canvasState:e.canvasState,expression:e.getParameterValue(t),expressionId:e.getParameterExpressionId(t)},on:{change:function(n){return e.changeParameterValue(n,t)}}})],1)})),0):e._e()]):e._e(),e._v(" "),"text"===e.canvasState.selection.content.kind||"image"===e.canvasState.selection.content.kind||"color"===e.canvasState.selection.content.kind?n("div",[n("button",{on:{click:function(t){return e.extractAsComponent()}}},[e._v("extract as component")])]):e._e()]):e._e(),e._v(" "),"template"===e.canvasState.selection.kind?n("div",[n("div",[e._v("\n      name\n      "),n("input",{attrs:{type:"text"},domProps:{value:e.canvasState.selection.template.name},on:{change:e.changeName}})]),e._v(" "),n("div",[e._v("\n      x\n      "),n("input",{attrs:{type:"number"},domProps:{value:e.canvasState.selection.template.x},on:{change:function(t){return e.changePosition(t,"x")}}})]),e._v(" "),n("div",[e._v("\n      y\n      "),n("input",{attrs:{type:"number"},domProps:{value:e.canvasState.selection.template.y},on:{change:function(t){return e.changePosition(t,"y")}}})]),e._v(" "),n("div",[e._v("\n      z\n      "),n("input",{attrs:{type:"number"},domProps:{value:e.canvasState.selection.template.z},on:{change:function(t){return e.changePosition(t,"z")}}})]),e._v(" "),n("div",[e._v("\n      width\n      "),n("expression-input",{attrs:{canvasState:e.canvasState,literal:e.canvasState.selection.template.width,literalType:"number",expression:e.canvasState.selection.template.widthExpression,expressionId:e.canvasState.selection.template.widthExpressionId},on:{change:function(t){return e.changeSizeExpression(t,"width")}}})],1),e._v(" "),n("div",[e._v("\n      height\n      "),n("expression-input",{attrs:{canvasState:e.canvasState,literal:e.canvasState.selection.template.height,literalType:"number",expression:e.canvasState.selection.template.heightExpression,expressionId:e.canvasState.selection.template.heightExpressionId},on:{change:function(t){return e.changeSizeExpression(t,"height")}}})],1),e._v(" "),n("div",[e._v("\n      display\n      "),n("select",{domProps:{value:e.canvasState.selection.template.display},on:{change:function(t){return e.changeFlex("display",t.target.value)}}},[n("option",{domProps:{value:void 0}}),e._v(" "),n("option",{attrs:{value:"flex"}},[e._v("flex")])])]),e._v(" "),n("div",[e._v("\n      flex direction\n      "),n("select",{domProps:{value:e.canvasState.selection.template.flexDirection},on:{change:function(t){return e.changeFlex("flexDirection",t.target.value)}}},[n("option",{attrs:{value:"row"}},[e._v("row")]),e._v(" "),n("option",{attrs:{value:"column"}},[e._v("column")])])]),e._v(" "),n("div",[e._v("\n      justify content\n      "),n("select",{domProps:{value:e.canvasState.selection.template.justifyContent},on:{change:function(t){return e.changeFlex("justifyContent",t.target.value)}}},[n("option",{attrs:{value:"start"}},[e._v("start")]),e._v(" "),n("option",{attrs:{value:"end"}},[e._v("end")]),e._v(" "),n("option",{attrs:{value:"center"}},[e._v("center")]),e._v(" "),n("option",{attrs:{value:"between"}},[e._v("between")])])]),e._v(" "),n("div",[e._v("\n      align items\n      "),n("select",{domProps:{value:e.canvasState.selection.template.alignItems},on:{change:function(t){return e.changeFlex("alignItems",t.target.value)}}},[n("option",{attrs:{value:"start"}},[e._v("start")]),e._v(" "),n("option",{attrs:{value:"end"}},[e._v("end")]),e._v(" "),n("option",{attrs:{value:"center"}},[e._v("center")])])]),e._v(" "),n("div",[n("button",{on:{click:function(t){return e.renderToImage()}}},[e._v("render to image")]),e._v(" "),e.imageUrl?n("img",{staticStyle:{"object-fit":"contain",width:"100%"},attrs:{src:e.imageUrl}}):e._e()]),e._v(" "),n("div",[e._l(e.canvasState.selection.template.parameters||[],(function(t,i){return n("div",[e._v("\n        parameter "+e._s(i)+"\n        "),n("input",{attrs:{type:"text"},domProps:{value:t},on:{blur:function(t){return e.changeParameter(t,i)}}})])})),e._v(" "),n("button",{on:{click:function(t){return e.addParameter()}}},[e._v("add parameter")])],2)]):e._e(),e._v(" "),n("div",[n("button",{on:{click:function(t){return e.debug()}}},[e._v("debug")])]),e._v(" "),n("div",[n("button",{on:{click:function(t){return e.addTemplate()}}},[e._v("add template")]),e._v(" "),n("button",{on:{click:function(t){return e.addText()}}},[e._v("add text")]),e._v(" "),n("button",{on:{click:function(t){return e.addImage()}}},[e._v("add image")]),e._v(" "),n("button",{on:{click:function(t){return e.addColor()}}},[e._v("add color")])]),e._v(" "),n("div",[n("button",{on:{click:function(t){return e.toggleVariableEditor()}}},[e._v("edit variables")]),e._v(" "),n("button",{on:{click:function(t){return e.toggleCollectionEditor()}}},[e._v("edit collections")])]),e._v(" "),n("div",[n("button",{on:{click:function(t){return e.recommand()}}},[e._v("recommand")]),e._v(" "),e._l(e.recommandResults,(function(t){return n("img",{staticStyle:{"object-fit":"contain",width:"100%",cursor:"pointer"},attrs:{src:t.preview},on:{click:function(n){return e.applyRecommandResult(t.variables)}}})}))],2)])}var j=[];function w(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{style:e.canvasStyle},[n("div",{style:e.styleGuideStyle},[e._l(e.canvasState.styleGuide.templates,(function(t){return[n("div",{style:e.getTemplateStyle(t)},[t.name?n("div",{style:e.getNameStyle(t)},[e._v(e._s(t.name))]):e._e(),e._v(" "),n("template-renderer",{attrs:{template:t,styleGuide:e.canvasState.styleGuide}})],1)]}))],2)])}var k=[];function E(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{style:e.canvasStyle},[n("div",{style:e.styleGuideStyle},[e._l(e.selectionRegions,(function(t){return[n("div",{style:e.getSelectionAreaStyle(t)})]})),e._v(" "),e._l(e.canResizeRegions,(function(t){return[n("div",{style:e.getResizeStyle(t)},[e._l(e.resizeRegions,(function(e){return[n("div",{style:e})]}))],2)]})),e._v(" "),e.canRotateRegion?n("div",{style:e.rotateAreaStyle},[n("div",{style:e.rotateRegion}),e._v(" "),n("div",{style:e.rotateCircleRegion})]):e._e()],2)])}var G=[];function P(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{display:"flex"}},[n("div",{style:e.layerPanelStyle},[n("layer-panel",{attrs:{canvasState:e.canvasState}})],1),e._v(" "),n("div",{style:e.canvasStyle},[n("render-layer",{attrs:{canvasState:e.canvasState}}),e._v(" "),n("selection-layer",{attrs:{canvasState:e.canvasState}}),e._v(" "),n("hover-layer",{attrs:{canvasState:e.canvasState}}),e._v(" "),n("dragging-for-selection-layer",{attrs:{canvasState:e.canvasState}}),e._v(" "),n("mask-layer",{attrs:{canvasState:e.canvasState}}),e._v(" "),n("context-menu",{attrs:{canvasState:e.canvasState}})],1),e._v(" "),n("div",{style:e.operationPanelStyle},[n("operation-panel",{attrs:{canvasState:e.canvasState}})],1),e._v(" "),n("variable-editor",{attrs:{canvasState:e.canvasState}}),e._v(" "),n("collection-editor",{attrs:{canvasState:e.canvasState}})],1)}var I=[];function _(){var e=this.$createElement,t=this._self._c||e;return this.canvasState.variableEditorVisible?t("div",{style:this.editorStyle},[t("textarea",{staticStyle:{width:"calc(100% - 40px)",height:"400px","margin-left":"20px","margin-right":"20px"},domProps:{value:this.variable},on:{blur:this.changeVariable}})]):this._e()}var z=[];function M(){var e=this,t=e.$createElement,n=e._self._c||t;return e.appState.templateModelEditorVisible?n("div",{style:e.editorStyle},[n("json-editor",{attrs:{schema:e.schema,"initial-value":e.appState.templateModel},on:{"update-value":function(t){return e.updateValue(t)}}}),e._v(" "),n("textarea",{staticStyle:{width:"calc(100% - 40px)",height:"400px","margin-left":"20px","margin-right":"20px"},domProps:{value:e.templateModel},on:{blur:e.changeTemplateModel}})],1):e._e()}var C=[],T=n(24),R=n.n(T),W=n(5),Y=n(25);function N(e,t){var n,a;if("flex"===e.display)for(var r=e.flexDirection||"row",s=e.justifyContent||"start",o=e.alignItems||"start",c="row"===r?"x":"y",l="row"===r?"width":"height",p="row"===r?"y":"x",u=e.contents.reduce((function(e,n){return e+V(n,t)[l]}),0),d=0;d<e.contents.length;d++){(f=e.contents[d])[c]=X(s,e,l,u,d,t),f[p]=H(o,e,r,V(f,t))}var h=function(e){if("reference"===e.kind){var n=t.templates.find((function(t){return t.id===e.id}));n&&N(n,t)}else"snapshot"===e.kind&&N(e.snapshot,t)};try{for(var y=Object(i.h)(e.contents),v=y.next();!v.done;v=y.next()){var f;h(f=v.value)}}catch(e){n={error:e}}finally{try{v&&!v.done&&(a=y.return)&&a.call(y)}finally{if(n)throw n.error}}}function X(e,t,n,i,a,r){var s;s="start"===e?0:"end"===e?t[n]-i:"center"===e?(t[n]-i)/2:t.contents.length>1?a*Math.max(0,(t[n]-i)/(t.contents.length-1)):0;for(var o=0;o<a;o++)s+=V(t.contents[o],r)[n];return s}function H(e,t,n,i){if("start"===e)return 0;var a="row"===n?"height":"width";return"end"===e?t[a]-i[a]:(t[a]-i[a])/2}function V(e,t){if("reference"===e.kind){var n=t.templates.find((function(t){return t.id===e.id}));return n||{width:0,height:0}}return"snapshot"===e.kind?e.snapshot:e}var $=n(3);function q(e,t){var n,a,r,s,o,c;return Object(i.e)(this,(function(l){switch(l.label){case 0:l.trys.push([0,5,6,7]),n=Object(i.h)(t.templates),a=n.next(),l.label=1;case 1:return a.done?[3,4]:(r=a.value,[5,Object(i.h)(L(e,r,{x:r.x,y:r.y,z:r.z||0},t,0,void 0))]);case 2:l.sent(),l.label=3;case 3:return a=n.next(),[3,1];case 4:return[3,7];case 5:return s=l.sent(),o={error:s},[3,7];case 6:try{a&&!a.done&&(c=n.return)&&c.call(n)}finally{if(o)throw o.error}return[7];case 7:return[2]}}))}function A(e,t,n){var a,r,s,o,c,l;return Object(i.e)(this,(function(p){switch(p.label){case 0:return n?[5,Object(i.h)(J(e,n,n,{x:n.x,y:n.y,z:n.z||0},t,[],void 0))]:[3,2];case 1:return p.sent(),[2];case 2:p.trys.push([2,7,8,9]),a=Object(i.h)(t.templates),r=a.next(),p.label=3;case 3:return r.done?[3,6]:(s=r.value,[5,Object(i.h)(J(e,s,s,{x:s.x,y:s.y,z:s.z||0},t,[],void 0))]);case 4:p.sent(),p.label=5;case 5:return r=a.next(),[3,3];case 6:return[3,9];case 7:return o=p.sent(),c={error:o},[3,9];case 8:try{r&&!r.done&&(l=a.return)&&l.call(a)}finally{if(c)throw c.error}return[7];case 9:return[2]}}))}function K(e,t){return Array.isArray(e)?e.every((function(e){return K(e,t)})):(e=F(e,t)).x>=t.x&&e.y>=t.y&&e.x<=t.x+t.width&&e.y<=t.y+t.height}function F(e,t){return t.rotate?D(e,{x:t.x+t.width/2,y:t.y+t.height/2},t.rotate):e}function D(e,t,n){if(!n)return e;n=-n*Math.PI/180;var i=e.x-t.x,a=e.y-t.y,r=Math.sin(n),s=Math.cos(n);return{x:s*i-r*a+t.x,y:r*i+s*a+t.y}}function L(e,t,n,a,r,s,o){var c,l,p,u;return Object(i.e)(this,(function(d){switch(d.label){case 0:return t!==e&&void 0!==e?[3,2]:(c=ne("width",t,{props:s}),l=ne("height",t,{props:s}),[4,{x:n.x,y:n.y,z:n.z,width:c,height:l,parent:o,template:t,rotate:r}]);case 1:d.sent(),d.label=2;case 2:if(!e||t===e)return[3,6];p=function(r){var o,c,l,p,u,d;return Object(i.e)(this,(function(h){switch(h.label){case 0:return"reference"!==(o=t.contents[r]).kind?[3,2]:(c=a.templates.find((function(e){return e.id===o.id})))?(l=U(s,"x",o,t,a),p=U(s,"y",o,t,a),u=U(s,"z",o,t,a),d=te(o.props,{props:s}),[5,Object(i.h)(L(e,c,{x:l+n.x,y:p+n.y,z:u+n.z},a,o.rotate||0,d,{content:o,template:t,index:r}))]):[3,2];case 1:h.sent(),h.label=2;case 2:return[2]}}))},u=0,d.label=3;case 3:return u<t.contents.length?[5,p(u)]:[3,6];case 4:d.sent(),d.label=5;case 5:return u++,[3,3];case 6:return[2]}}))}function J(e,t,n,a,r,s,o){var c,l,p,u,d,h,y,v,f,g,m,x,b,S,O,j;return Object(i.e)(this,(function(w){switch(w.label){case 0:c=0,w.label=1;case 1:if(!(c<t.contents.length))return[3,6];if((l=t.contents[c])!==e&&void 0!==e)return[3,3];if(p=U(o,"x",l,t,r),u=U(o,"y",l,t,r),d=U(o,"z",l,t,r),h="reference"===l.kind?te(l.props,{props:o}):void 0,y=V(l,r),v=h?ne("width",y,{props:h}):y.width,f=h?ne("height",y,{props:h}):y.height,g=ae(l,{props:o}),m=a.x+p,x=a.y+u,s.length>0){for(g+=s.reduce((function(e,t){return e+t.rotate}),0),b={x:m+v/2,y:x+f/2},S=s.length-1;S>=0;S--)O=s[S],b=D(b,O,-O.rotate);m=b.x-v/2,x=b.y-f/2}return[4,{x:Z(m),y:Z(x),z:a.z+d,rotate:g||void 0,width:v,height:f,index:c,contents:t.contents,content:l,parent:t,template:n,rotates:s}];case 2:w.sent(),w.label=3;case 3:return"snapshot"!==l.kind?[3,5]:(j=Object(i.g)(s,[{rotate:l.rotate||0,x:a.x+l.x+l.snapshot.width/2,y:a.y+l.y+l.snapshot.height/2}]),[5,Object(i.h)(J(e,l.snapshot,n,{x:a.x+l.x,y:a.y+l.y,z:a.z+(l.z||0)},r,j,void 0))]);case 4:w.sent(),w.label=5;case 5:return c++,[3,1];case 6:return[2]}}))}function U(e,t,n,i,a){return"z"!==t&&i&&"flex"===i.display?function(e,t,n,i){var a=n.flexDirection||"row";if(t===("row"===a?"x":"y")){var r="row"===a?"width":"height";return X(n.justifyContent||"start",n,r,n.contents.reduce((function(e,t){return e+V(t,i)[r]}),0),n.contents.findIndex((function(t){return t===e})),i)}return H(n.alignItems||"start",n,a,V(e,i))}(n,t,i,a):ie(t,n,{props:e})}function B(e,t,n){var a,r,s,o,c,l,p;return Object(i.e)(this,(function(u){switch(u.label){case 0:a=Q/n,u.label=1;case 1:u.trys.push([1,6,7,8]),r=Object(i.h)(t.templates),s=r.next(),u.label=2;case 2:return s.done?[3,5]:(o=s.value,void 0!==e&&e!==o||!o.name?[3,4]:[4,{x:o.x,y:o.y-a,z:o.z||0,width:a*o.name.length,height:a,template:o,parent:void 0}]);case 3:u.sent(),u.label=4;case 4:return s=r.next(),[3,2];case 5:return[3,8];case 6:return c=u.sent(),l={error:c},[3,8];case 7:try{s&&!s.done&&(p=r.return)&&p.call(r)}finally{if(l)throw l.error}return[7];case 8:return[2]}}))}var Q=14;function Z(e){return Math.round(100*e)/100}function ee(e){var t,n,a={};if(e)try{for(var r=Object(i.h)(e),s=r.next();!s.done;s=r.next()){var o=s.value;a[o.name]=o.value}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return a}function te(e,t,n){if(e)try{if(n&&n.precompiledStyleGuide){var i=n.precompiledStyleGuide.ast[e];if(i instanceof Error)throw i;return Object($.a)(i,t)}return Object($.a)(Object($.c)(Object($.g)(e)),t)}catch(i){return void(n&&n.errorHandler&&n.errorHandler({error:i,expression:e,model:t,stack:n.stack}))}}function ne(e,t,n,i){var a=e+"Expression",r=t[a];if(r){var s=te(r,n,le(i,a));if("number"==typeof s&&!isNaN(s))return Z(s)}return t[e]}function ie(e,t,n,i){var a=e+"Expression",r=t[a];if(r){var s=te(r,n,le(i,a));if("number"==typeof s&&!isNaN(s))return"z"===e?Math.round(s):Z(s)}return t[e]||0}function ae(e,t,n){var i=e.rotateExpression;if(i){var a=te(i,t,le(n,"rotateExpression"));if("number"==typeof a&&!isNaN(a))return Z(a)}return e.rotate||0}function re(e,t,n){if(e.urlExpression){var i=te(e.urlExpression,t,le(n,"urlExpression"));if("string"==typeof i)return i}return e.url}function se(e,t,n){if(e.textExpression){var i=te(e.textExpression,t,le(n,"textExpression"));if("string"==typeof i)return i}return e.text}function oe(e,t,n){if(e.fontSizeExpression){var i=te(e.fontSizeExpression,t,le(n,"fontSizeExpression"));if("number"==typeof i&&!isNaN(i))return Z(i)}return e.fontSize}function ce(e,t,n){if(e.colorExpression){var i=te(e.colorExpression,t,le(n,"colorExpression"));if("string"==typeof i)return i}return e.color}function le(e,t){return e&&e.stack?Object(i.a)(Object(i.a)({},e),{stack:Object(i.g)(e.stack,[t])}):e}function pe(e,t){var n=document.createElement("canvas");n.width=e.width,n.height=e.height;var i=n.getContext("2d");if(i){i.drawImage(e,0,0);for(var a=i.getImageData(0,0,e.width,e.height),r=0;r<e.width/2;r++)for(var s=0;s<e.height;s++){var o=4*(s*e.width+r)+3,c=Math.round(a.data[o]*t);c=Math.max(c,0),c=Math.min(c,255),a.data[o]=c}return i.putImageData(a,0,0),n}}function ue(e){return new Promise((function(t){var n=document.createElement("img");n.crossOrigin="anonymous",n.onload=function(){t(n)},e.startsWith("data:image/")?n.src=e:n.src=e+"?random="+Math.random()}))}function de(e){return Array.from(e).map((function(e){return{text:e}}))}function he(e,t,n,a){return Object(i.b)(this,void 0,void 0,(function(){var r,s,o,c,l;return Object(i.e)(this,(function(p){switch(p.label){case 0:r=[],s=[],o=0,p.label=1;case 1:return o<e.contents.length?[4,ve(e.contents[o],t,n,s,le(a,o))]:[3,4];case 2:void 0===(c=p.sent()).ifValue?s=[]:s.push(c.ifValue),r.push.apply(r,Object(i.g)(c.contents)),p.label=3;case 3:return o++,[3,1];case 4:return(l=Object(i.a)(Object(i.a)({},e),{x:0,y:0,contents:r})).width=ne("width",l,n,a),delete l.widthExpression,delete l.widthExpressionId,l.height=ne("height",l,n,a),delete l.heightExpression,delete l.heightExpressionId,N(l,t),[2,l]}}))}))}var ye=function(){function e(e){var t,n,a,r;this.ast={},this.repeat={};try{for(var s=Object(i.h)(e.templates),o=s.next();!o.done;o=s.next()){var c=o.value;this.collectExpression(c.widthExpression),this.collectExpression(c.heightExpression);try{for(var l=(a=void 0,Object(i.h)(c.contents)),p=l.next();!p.done;p=l.next()){var u=p.value;if("snapshot"!==u.kind){if(u.repeat){var d=this.collectRepeat(u.repeat);this.collectExpression(d.expression)}this.collectExpression(u.if),this.collectExpression(u.xExpression),this.collectExpression(u.yExpression),this.collectExpression(u.zExpression),"reference"!==u.kind?(this.collectExpression(u.widthExpression),this.collectExpression(u.heightExpression),this.collectExpression(u.rotateExpression),"text"===u.kind?(this.collectExpression(u.textExpression),this.collectExpression(u.fontSizeExpression),this.collectExpression(u.colorExpression)):"image"===u.kind?this.collectExpression(u.urlExpression):"color"===u.kind&&this.collectExpression(u.colorExpression)):this.collectExpression(u.props)}}}catch(e){a={error:e}}finally{try{p&&!p.done&&(r=l.return)&&r.call(l)}finally{if(a)throw a.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}}return e.prototype.collectExpression=function(e){e&&!this.ast[e]&&(this.ast[e]=function(e){try{return Object($.c)(Object($.g)(e))}catch(e){return e}}(e))},e.prototype.collectRepeat=function(e){return this.repeat[e]||(this.repeat[e]=fe(e)),this.repeat[e]},e}();function ve(e,t,n,a,r){return Object(i.b)(this,void 0,void 0,(function(){var s,o,c,l,p,u,d,h,y,v,f,g,m,x,b,S,O;return Object(i.e)(this,(function(j){switch(j.label){case 0:if("snapshot"===e.kind)return[2,{contents:[e]}];if(!e.repeat)return[3,5];if(s=fe(e.repeat,r),o=s.expression,c=s.itemName,l=s.indexName,m=te(o,n,le(r,"repeat")),!Array.isArray(m))return[3,5];p=[],u=[],d=0,j.label=1;case 1:return d<m.length?(h=Object(i.a)({},n),c&&(h[c]=m[d],l&&(h[l]=d)),[4,ve(Object(i.a)(Object(i.a)({},e),{repeat:void 0}),t,h,u,r)]):[3,4];case 2:void 0===(y=j.sent()).ifValue?u=[]:u.push(y.ifValue),p.push.apply(p,Object(i.g)(y.contents)),j.label=3;case 3:return d++,[3,1];case 4:return[2,{contents:p}];case 5:return e.else&&a.some((function(e){return!0===e}))?[2,{contents:[],ifValue:!1}]:e.if&&"boolean"==typeof(m=te(e.if,n,le(r,"if")))&&(v=m,!1===m)?[2,{contents:[],ifValue:v}]:((e=Object(i.a)({},e)).x=ie("x",e,n,r),delete e.xExpression,delete e.xExpressionId,e.y=ie("y",e,n,r),delete e.yExpression,delete e.yExpressionId,"reference"!==e.kind?[3,8]:(f=e.id,(g=t.templates.find((function(e){return e.id===f})))?(e.props&&(m=te(e.props,n,le(r,"props")),delete e.props,delete e.propsIds,n=Object(i.a)(Object(i.a)({},n),{props:m})),x={},b={kind:"snapshot",x:e.x,y:e.y,rotate:e.rotate},[4,he(g,t,n,le(r,g.name||g.id))]):[3,7]));case 6:return[2,(x.contents=[(b.snapshot=j.sent(),b)],x.ifValue=v,x)];case 7:return[2,{contents:[],ifValue:v}];case 8:return e.width=ne("width",e,n,r),delete e.widthExpression,delete e.widthExpressionId,e.height=ne("height",e,n,r),delete e.heightExpression,delete e.heightExpressionId,e.rotate=ae(e,n,r),delete e.rotateExpression,delete e.rotateExpressionId,"text"===e.kind&&(e.text=se(e,n,r),delete e.textExpression,delete e.textExpressionId,e.characters=de(e.text),e.fontSize=oe(e,n,r),delete e.fontSizeExpression,delete e.fontSizeExpressionId,e.color=ce(e,n,r),delete e.colorExpression,delete e.colorExpressionId),"image"!==e.kind?[3,10]:(e.url=re(e,n,r),delete e.urlExpression,delete e.urlExpressionId,void 0===e.opacity?[3,10]:[4,ue(e.url)]);case 9:S=j.sent(),(O=pe(S,e.opacity))&&(e.base64=O.toDataURL()),j.label=10;case 10:return"color"===e.kind&&(e.color=ce(e,n,r),delete e.colorExpression,delete e.colorExpressionId),[2,{contents:[e],ifValue:v}]}}))}))}function fe(e,t){if(t&&t.precompiledStyleGuide)return t.precompiledStyleGuide.repeat[e];var n=e.indexOf(" in ");if(-1===n)return{expression:e};var i=e.substring(0,n).trim(),a=e.substring(n+4).trim();if(i.startsWith("(")&&i.endsWith(")")){var r=i.substring(1,i.length-1).split(",");return 0===r.length?{expression:a}:1===r.length?{expression:a,itemName:r[0].trim()}:{expression:a,itemName:r[0].trim(),indexName:r[1].trim()}}return{expression:a,itemName:i}}function ge(e){if(e.expression)return e.itemName?e.indexName?"("+e.itemName+", "+e.indexName+") in "+e.expression:e.itemName+" in "+e.expression:e.expression}var me=(new R.a).compile({$ref:"#/definitions/StyleGuide",definitions:{StyleGuide:{type:"object",properties:{name:{type:"string"},templates:{type:"array",items:{$ref:"#/definitions/Template"}},variables:{type:"array",items:{$ref:"#/definitions/StyleGuideVariable"}},collections:{type:"array",items:{$ref:"#/definitions/StyleGuideCollection"}},constrains:{type:"array",items:{type:"string"}}},required:["name","templates"],additionalProperties:!1},Template:{type:"object",properties:{id:{type:"string"},name:{type:"string"},contents:{type:"array",items:{$ref:"#/definitions/TemplateContent"}},parameters:{type:"array",items:{type:"string"}},x:{type:"number"},y:{type:"number"},z:{type:"integer"},width:{type:"number"},height:{type:"number"},widthExpression:{type:"string"},heightExpression:{type:"string"},widthExpressionId:{type:"string"},heightExpressionId:{type:"string"},display:{type:"string",const:"flex"},flexDirection:{type:"string",enum:["row","column"]},justifyContent:{type:"string",enum:["start","end","center","between"]},alignItems:{type:"string",enum:["start","end","center"]},marginLeft:{type:"number"},marginRight:{type:"number"},marginTop:{type:"number"},marginBottom:{type:"number"}},required:["id","contents","x","y","width","height"],additionalProperties:!1},TemplateContent:{anyOf:[{$ref:"#/definitions/TemplateTextContent"},{$ref:"#/definitions/TemplateImageContent"},{$ref:"#/definitions/TemplateColorContent"},{$ref:"#/definitions/TemplateReferenceContent"},{$ref:"#/definitions/TemplateSnapshotContent"}]},TemplateTextContent:{type:"object",properties:{kind:{type:"string",const:"text"},text:{type:"string"},textExpression:{type:"string"},textExpressionId:{type:"string"},fontFamily:{type:"string"},fontSize:{type:"number"},fontSizeExpression:{type:"string"},fontSizeExpressionId:{type:"string"},color:{type:"string"},colorExpression:{type:"string"},colorExpressionId:{type:"string"},characters:{type:"array",items:{$ref:"#/definitions/TextCharacter"}},x:{type:"number"},y:{type:"number"},z:{type:"integer"},width:{type:"number"},height:{type:"number"},xExpression:{type:"string"},yExpression:{type:"string"},zExpression:{type:"string"},xExpressionId:{type:"string"},yExpressionId:{type:"string"},zExpressionId:{type:"string"},widthExpression:{type:"string"},heightExpression:{type:"string"},widthExpressionId:{type:"string"},heightExpressionId:{type:"string"},if:{type:"string"},ifId:{type:"string"},else:{type:"boolean"},repeat:{type:"string"},repeatId:{type:"string"},hidden:{type:"boolean"},rotate:{type:"number"},rotateExpression:{type:"string"},rotateExpressionId:{type:"string"}},required:["kind","text","fontFamily","fontSize","color","x","y","width","height"],additionalProperties:!1},TextCharacter:{type:"object",properties:{text:{type:"string"}},required:["text"],additionalProperties:!1},TemplateImageContent:{type:"object",properties:{kind:{type:"string",const:"image"},url:{type:"string"},urlExpression:{type:"string"},urlExpressionId:{type:"string"},opacity:{type:"number"},base64:{type:"string"},x:{type:"number"},y:{type:"number"},z:{type:"integer"},width:{type:"number"},height:{type:"number"},xExpression:{type:"string"},yExpression:{type:"string"},zExpression:{type:"string"},xExpressionId:{type:"string"},yExpressionId:{type:"string"},zExpressionId:{type:"string"},widthExpression:{type:"string"},heightExpression:{type:"string"},widthExpressionId:{type:"string"},heightExpressionId:{type:"string"},if:{type:"string"},ifId:{type:"string"},else:{type:"boolean"},repeat:{type:"string"},repeatId:{type:"string"},hidden:{type:"boolean"},rotate:{type:"number"},rotateExpression:{type:"string"},rotateExpressionId:{type:"string"}},required:["kind","url","x","y","width","height"],additionalProperties:!1},TemplateColorContent:{type:"object",properties:{kind:{type:"string",const:"color"},color:{type:"string"},colorExpression:{type:"string"},colorExpressionId:{type:"string"},x:{type:"number"},y:{type:"number"},z:{type:"integer"},width:{type:"number"},height:{type:"number"},xExpression:{type:"string"},yExpression:{type:"string"},zExpression:{type:"string"},xExpressionId:{type:"string"},yExpressionId:{type:"string"},zExpressionId:{type:"string"},widthExpression:{type:"string"},heightExpression:{type:"string"},widthExpressionId:{type:"string"},heightExpressionId:{type:"string"},if:{type:"string"},ifId:{type:"string"},else:{type:"boolean"},repeat:{type:"string"},repeatId:{type:"string"},hidden:{type:"boolean"},rotate:{type:"number"},rotateExpression:{type:"string"},rotateExpressionId:{type:"string"}},required:["kind","color","x","y","width","height"],additionalProperties:!1},TemplateReferenceContent:{type:"object",properties:{kind:{type:"string",const:"reference"},id:{type:"string"},props:{type:"string"},propsIds:{type:"object",additionalProperties:{type:"string"}},x:{type:"number"},y:{type:"number"},z:{type:"integer"},xExpression:{type:"string"},yExpression:{type:"string"},zExpression:{type:"string"},xExpressionId:{type:"string"},yExpressionId:{type:"string"},zExpressionId:{type:"string"},if:{type:"string"},ifId:{type:"string"},else:{type:"boolean"},repeat:{type:"string"},repeatId:{type:"string"},hidden:{type:"boolean"},rotate:{type:"number"}},required:["kind","id","x","y"],additionalProperties:!1},TemplateSnapshotContent:{type:"object",properties:{kind:{type:"string",const:"snapshot"},snapshot:{$ref:"#/definitions/Template"},x:{type:"number"},y:{type:"number"},z:{type:"integer"},xExpression:{type:"string"},yExpression:{type:"string"},zExpression:{type:"string"},xExpressionId:{type:"string"},yExpressionId:{type:"string"},zExpressionId:{type:"string"},hidden:{type:"boolean"},rotate:{type:"number"}},required:["kind","snapshot","x","y"],additionalProperties:!1},StyleGuideVariable:{type:"object",properties:{kind:{type:"string"},name:{type:"string"},displayName:{type:"string"},value:{}},required:["name","value"],additionalProperties:!1},StyleGuideCollection:{$ref:"#/definitions/StyleGuideColor"},StyleGuideColor:{type:"object",properties:{kind:{type:"string",const:"color"},color:{type:"string"}},required:["kind","color"],additionalProperties:!1}}}),xe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.styleGuideKey="kfc.json",t.templateModelKey="kfc-model.json",t.key="",t.ws=null,t.lastStyleGuide=null,t}return Object(i.d)(t,e),t.prototype.created=function(){var e=this;setInterval((function(){if(e.ws&&e.ws.readyState===e.ws.OPEN&&e.lastStyleGuide){var t=W.b(e.lastStyleGuide,e.appState.canvasState.styleGuide);t.length>0&&(e.ws.send(JSON.stringify({method:"patch",operations:t})),e.lastStyleGuide=W.c(e.appState.canvasState.styleGuide))}}),3e3)},t.prototype.loadStyleGuide=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t=this;return Object(i.e)(this,(function(n){switch(n.label){case 0:return this.styleGuideKey?[4,fetch("https://storage.yorkyao.xyz/"+this.styleGuideKey)]:[3,3];case 1:return[4,n.sent().json()];case 2:e=n.sent(),me(e)?(this.key!==this.styleGuideKey&&(this.ws&&(this.ws.onmessage=null,this.ws.close()),this.key=this.styleGuideKey,this.ws=new WebSocket("wss://storage.yorkyao.xyz/ws/template-editor-demo?key="+this.key),Object(Y.setWsHeartbeat)(this.ws,'{"method":"ping"}'),this.ws.onmessage=function(e){if("string"==typeof e.data&&e.data){var n=JSON.parse(e.data);"patch"==n.method&&(W.a(t.appState.canvasState.styleGuide,n.operations),t.lastStyleGuide=W.c(t.appState.canvasState.styleGuide))}}),this.lastStyleGuide=W.c(e),this.appState.canvasState.styleGuide=e,this.appState.canvasState.applyCanvasSizeChange()):console.error(me.errors),n.label=3;case 3:return[2]}}))}))},t.prototype.saveStyleGuide=function(){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.e)(this,(function(e){switch(e.label){case 0:return this.styleGuideKey?[4,fetch("https://storage.yorkyao.xyz/"+this.styleGuideKey,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.appState.canvasState.styleGuide)})]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.loadTemplateModel=function(){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.e)(this,(function(t){switch(t.label){case 0:return this.templateModelKey?[4,fetch("https://storage.yorkyao.xyz/"+this.templateModelKey)]:[3,3];case 1:return[4,t.sent().json()];case 2:e=t.sent(),this.appState.templateModel=e,t.label=3;case 3:return[2]}}))}))},t.prototype.saveTemplateModel=function(){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.e)(this,(function(e){switch(e.label){case 0:return this.templateModelKey?[4,fetch("https://storage.yorkyao.xyz/"+this.templateModelKey,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.appState.templateModel)})]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.editTemplateModel=function(){this.appState.templateModelEditorVisible=!this.appState.templateModelEditorVisible},t.prototype.generate=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a,r,s,o,c;return Object(i.e)(this,(function(l){switch(l.label){case 0:return this.appState.graphicCanvasState?(this.appState.graphicCanvasState=null,[2]):"template"!==this.appState.canvasState.selection.kind?[3,2]:(e=Date.now(),t=[],[4,he(this.appState.canvasState.selection.template,this.appState.canvasState.styleGuide,Object(i.a)(Object(i.a)({},this.appState.templateModel),{variable:ee(this.appState.canvasState.styleGuide.variables)}),{errorHandler:function(e){return t.push(e)},precompiledStyleGuide:this.precompiledStyleGuide,stack:[this.appState.canvasState.selection.template.name||this.appState.canvasState.selection.template.id]})]);case 1:n=l.sent(),console.info(Date.now()-e);try{for(a=Object(i.h)(t),r=a.next();!r.done;r=a.next())s=r.value,console.info(s.stack?s.stack.join(" "):"",s.expression,s.error.message,s.model)}catch(e){o={error:e}}finally{try{r&&!r.done&&(c=a.return)&&c.call(a)}finally{if(o)throw o.error}}this.appState.loadGraphicCanvas(n),l.label=2;case 2:return[2]}}))}))},t.prototype.precompile=function(){this.precompiledStyleGuide=new ye(this.appState.canvasState.styleGuide)},t=Object(i.c)([Object(r.a)({render:s,staticRenderFns:o,props:["appState"]})],t)}(a.a),be=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema={type:"object",properties:{categories:{type:"array",items:{type:"object",properties:{name:{type:"string"},id:{type:"string"},commodities:{type:"array",items:{type:"object",properties:{name:{type:"string"},id:{type:"string"},description:{type:"string"},image:{type:"string"},prices:{type:"array",items:{type:"string"}}},required:["id","name","prices","description","image"],collapsed:!0}}},required:["id","name","commodities"],collapsed:!0}}},required:["categories"]},t.editorStyle={position:"absolute",right:"0px",left:"0px",top:"50px",backgroundColor:"white",zIndex:1,height:t.appState.canvasState.canvasHeight+"px",overflow:"auto"},t}return Object(i.d)(t,e),t.prototype.updateValue=function(e){e.isValid&&(this.appState.templateModel=e.value)},Object.defineProperty(t.prototype,"templateModel",{get:function(){return JSON.stringify(this.appState.templateModel,null,2)},enumerable:!0,configurable:!0}),t.prototype.changeTemplateModel=function(e){try{this.appState.templateModel=JSON.parse(e.target.value)}catch(e){}},t=Object(i.c)([Object(r.a)({render:M,staticRenderFns:C,props:["appState"]})],t)}(a.a),Se={name:"test",templates:[{id:"1",name:"组件",x:0,y:0,width:500,height:300,contents:[{kind:"text",text:"test",fontFamily:"serif",fontSize:50,color:"",colorExpression:"variable.textColor",colorExpressionId:"6",width:100,height:100,x:10,y:10},{kind:"image",url:"https://mdn.mozillademos.org/files/6457/mdn_logo_only_color.png",width:100,height:100,x:210,y:10,xExpression:"props.width - 300"}],parameters:["width","color"],widthExpression:"props.width",widthExpressionId:"4"},{id:"2",name:"模板",x:600,y:0,width:1100,height:400,contents:[{kind:"color",x:0,y:0,width:1100,height:400,color:"",colorExpression:"variable.backgroundColor",colorExpressionId:"6"},{kind:"reference",id:"1",x:10,y:10,props:"{ width: 400 }"},{kind:"reference",id:"1",x:550,y:10}]}],variables:[{kind:"color",name:"backgroundColor",displayName:"background color",value:"#cccccc"},{kind:"color",name:"textColor",displayName:"text color",value:"#ff0000"}],collections:[{kind:"color",color:"#000000"},{kind:"color",color:"#ffffff"}],constrains:["variable.backgroundColor !== variable.textColor"]},Oe=[{id:"1",name:"price count",expression:"commodity.prices.length == 3",variables:[{tokenIndex:6},"prices"]},{id:"2",name:"commodity property",expression:"commodity.name",variables:["commodity",{tokenIndex:2,enum:["name","id","description","image"]}]},{id:"3",name:"price index",expression:"commodity?.prices?.[0]",variables:["the",{tokenIndex:5},"th price"]},{id:"4",name:"component parameter",expression:"props.name",variables:["component parameter",{tokenIndex:2,internal:"component parameters"}]},{id:"5",name:"categories range",expression:"categories.slice(0, 1)",variables:["categories",{tokenIndex:4},"until",{tokenIndex:6}]},{id:"6",name:"variable",expression:"variable.name",variables:["variable",{tokenIndex:2,internal:"variable"}]}],je=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.styleGuide={name:"",templates:[]},t.styleGuideTranslateX=0,t.styleGuideTranslateY=0,t.styleGuideScale=1,t.canvasWidth=1200,t.canvasHeight=400,t.selection={kind:"none"},t.mousedownX=0,t.mousedownY=0,t.mouseupX=0,t.mouseupY=0,t.mousePressing=!1,t.hasRelationWithSelection=!1,t.x=0,t.y=0,t.contextMenuEnabled=!1,t.contextMenuX=0,t.contextMenuY=0,t._styleGuideWidth=0,t._styleGuideHeight=0,t.styleGuideHistory=[],t.presetExpressions=Oe,t.variableEditorVisible=!1,t.collectionEditorVisible=!1,t}var n;return Object(i.d)(t,e),n=t,t.create=function(e,t,i){var a=new n;return a.styleGuide=e,a.canvasWidth=t,a.canvasHeight=i,a.applyCanvasSizeChange(),a},t.prototype.applyCanvasSizeChange=function(){var e=this.canvasWidth/this.styleGuideWidth,t=this.canvasHeight/this.styleGuideHeight;this.styleGuideScale=.9*Math.min(e,t);var n=this.styleGuideWidth*(e-this.styleGuideScale)/2,i=this.styleGuideHeight*(t-this.styleGuideScale)/2;this.styleGuideTranslateX=(n-this.styleGuideX*this.styleGuideScale-this.styleGuideWidth/2)/this.styleGuideScale+this.styleGuideWidth/2,this.styleGuideTranslateY=(i-this.styleGuideY*this.styleGuideScale-this.styleGuideHeight/2)/this.styleGuideScale+this.styleGuideHeight/2},Object.defineProperty(t.prototype,"styleGuideX",{get:function(){return Math.min.apply(Math,Object(i.g)(this.styleGuide.templates.map((function(e){return e.x}))))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"styleGuideWidth",{get:function(){if(this.hasRelationWithSelection)return this._styleGuideWidth;var e=Math.max.apply(Math,Object(i.g)(this.styleGuide.templates.map((function(e){return e.x+e.width})))),t=Math.max(e-this.styleGuideX,10);return this._styleGuideWidth=t,t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"styleGuideY",{get:function(){return Math.min.apply(Math,Object(i.g)(this.styleGuide.templates.map((function(e){return e.y}))))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"styleGuideHeight",{get:function(){if(this.hasRelationWithSelection)return this._styleGuideHeight;var e=Math.max.apply(Math,Object(i.g)(this.styleGuide.templates.map((function(e){return e.y+e.height})))),t=Math.max(e-this.styleGuideY,10);return this._styleGuideHeight=t,t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDraggingForSelection",{get:function(){return this.moved&&this.mousePressing&&!this.hasRelationWithSelection},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"moved",{get:function(){return!we(this.mouseupX,this.mousedownX)||!we(this.mouseupY,this.mousedownY)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mousedownMappedX",{get:function(){return this.mapX(this.mousedownX)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mousedownMappedY",{get:function(){return this.mapY(this.mousedownY)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mouseupMappedX",{get:function(){return this.mapX(this.mouseupX)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mouseupMappedY",{get:function(){return this.mapY(this.mouseupY)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mappedX",{get:function(){return this.mapX(this.x)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mappedY",{get:function(){return this.mapY(this.y)},enumerable:!0,configurable:!0}),t.prototype.mapX=function(e){return(e-((this.styleGuideTranslateX-this.styleGuideWidth/2)*this.styleGuideScale+this.styleGuideWidth/2))/this.styleGuideScale},t.prototype.mapY=function(e){return(e-((this.styleGuideTranslateY-this.styleGuideHeight/2)*this.styleGuideScale+this.styleGuideHeight/2))/this.styleGuideScale},t.prototype.action=function(){this.styleGuideHistory.push(JSON.parse(JSON.stringify(this.styleGuide))),this.styleGuideHistory.length>10&&this.styleGuideHistory.splice(0,this.styleGuideHistory.length-10)},t.prototype.undo=function(){var e=this.styleGuideHistory.pop();e&&(this.styleGuide=e)},Object.defineProperty(t.prototype,"allTemplateRegions",{get:function(){return"template"===this.selection.kind?Array.from(q(this.selection.template,this.styleGuide)):[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allContentRegions",{get:function(){return"content"===this.selection.kind?Array.from(A(this.selection.content,this.styleGuide,this.selection.template)):[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allNameRegions",{get:function(){return"template"===this.selection.kind?Array.from(B(this.selection.template,this.styleGuide,this.styleGuideScale)):[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"targetTemplateRegions",{get:function(){return Array.from(q(void 0,this.styleGuide))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"targetContentRegions",{get:function(){return Array.from(A(void 0,this.styleGuide))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"targetNameRegions",{get:function(){return Array.from(B(void 0,this.styleGuide,this.styleGuideScale))},enumerable:!0,configurable:!0}),t=n=Object(i.c)([r.a],t)}(a.a);function we(e,t){var n=e-t;return n<Number.EPSILON&&n>-Number.EPSILON}function ke(e,t){var n,a,r,s,o,c,l;return Object(i.e)(this,(function(p){switch(p.label){case 0:n=function(e){var n;return Object(i.e)(this,(function(i){switch(i.label){case 0:return e.hidden?[2,"continue"]:"text"!==e.kind?[3,2]:[4,{kind:"text",content:e}];case 1:return i.sent(),[3,11];case 2:return"image"!==e.kind?[3,4]:[4,{kind:"image",content:e}];case 3:return i.sent(),[3,11];case 4:return"color"!==e.kind?[3,6]:[4,{kind:"color",content:e}];case 5:return i.sent(),[3,11];case 6:return"reference"!==e.kind?[3,9]:(n=t.templates.find((function(t){return t.id===e.id})))?[4,{kind:"symbol",content:e,symbol:n,props:e.props}]:[3,8];case 7:i.sent(),i.label=8;case 8:return[3,11];case 9:return"snapshot"!==e.kind?[3,11]:[4,{kind:"symbol",content:e,symbol:e.snapshot}];case 10:i.sent(),i.label=11;case 11:return[2]}}))},p.label=1;case 1:p.trys.push([1,6,7,8]),a=Object(i.h)(e.contents),r=a.next(),p.label=2;case 2:return r.done?[3,5]:(s=r.value,[5,n(s)]);case 3:p.sent(),p.label=4;case 4:return r=a.next(),[3,2];case 5:return[3,8];case 6:return o=p.sent(),c={error:o},[3,8];case 7:try{r&&!r.done&&(l=a.return)&&l.call(a)}finally{if(c)throw c.error}return[7];case 8:return[2]}}))}var Ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"variable",{get:function(){return ee(this.styleGuide.variables)},enumerable:!0,configurable:!0}),t.prototype.render=function(e){return e("div",{style:{width:this.template.width+"px",height:this.template.height+"px",position:"absolute",userSelect:"none",backgroundColor:"white",zIndex:-2147483584}},[e("symbol-renderer",{props:{reference:this.template,styleGuide:this.styleGuide,content:{x:0,y:0},z:0,variable:this.variable}})])},t=Object(i.c)([Object(r.a)({props:["template","styleGuide"]})],t)}(a.a),Ge=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"width",{get:function(){return this.referenceProps?ne("width",this.reference,{variable:this.variable,props:this.referenceProps}):this.reference.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.referenceProps?ne("height",this.reference,{variable:this.variable,props:this.referenceProps}):this.reference.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return U(this.props,"x",this.content,this.template,this.styleGuide)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return U(this.props,"y",this.content,this.template,this.styleGuide)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zValue",{get:function(){return this.z+U(this.props,"z",this.content,this.template,this.styleGuide)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return ae(this.content,{variable:this.variable,props:this.props})},enumerable:!0,configurable:!0}),t.prototype.render=function(e){var t,n,a=[];try{for(var r=Object(i.h)(ke(this.reference,this.styleGuide)),s=r.next();!s.done;s=r.next()){var o=s.value;if("text"===o.kind)a.push(e("text-renderer",{props:{content:o.content,props:this.referenceProps,template:this.reference,styleGuide:this.styleGuide,z:this.zValue,variable:this.variable}}));else if("image"===o.kind)a.push(e("image-renderer",{props:{content:o.content,props:this.referenceProps,template:this.reference,styleGuide:this.styleGuide,z:this.zValue,variable:this.variable}}));else if("color"===o.kind)a.push(e("color-renderer",{props:{content:o.content,props:this.referenceProps,template:this.reference,styleGuide:this.styleGuide,z:this.zValue,variable:this.variable}}));else if("symbol"===o.kind){var c=o.content,l=te(o.props,{variable:this.variable,props:this.referenceProps});a.push(e("symbol-renderer",{props:{reference:o.symbol,styleGuide:this.styleGuide,referenceProps:l,content:c,template:this.reference,props:this.referenceProps,z:this.zValue,variable:this.variable}}))}}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e("div",{style:{width:this.width+"px",height:this.height+"px",left:this.x+"px",top:this.y+"px",position:"absolute",userSelect:"none",transform:this.rotate?"rotate("+this.rotate+"deg)":void 0}},a)},t=Object(i.c)([Object(r.a)({props:["reference","styleGuide","referenceProps","content","template","props","z","variable"]})],t)}(a.a);a.a.component("symbol-renderer",Ge);var Pe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"text",{get:function(){return se(this.content,{variable:this.variable,props:this.props})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"characters",{get:function(){return de(this.text)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return oe(this.content,{variable:this.variable,props:this.props})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return ce(this.content,{variable:this.variable,props:this.props})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return U(this.props,"x",this.content,this.template,this.styleGuide)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return U(this.props,"y",this.content,this.template,this.styleGuide)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zValue",{get:function(){return this.z+U(this.props,"z",this.content,this.template,this.styleGuide)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return ae(this.content,{variable:this.variable,props:this.props})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return ne("width",this.content,{variable:this.variable,props:this.props})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return ne("height",this.content,{variable:this.variable,props:this.props})},enumerable:!0,configurable:!0}),t.prototype.render=function(e){return e("div",{style:{color:this.color,fontSize:this.fontSize+"px",fontFamily:this.content.fontFamily,position:"absolute",left:this.x+"px",top:this.y+"px",width:this.width+"px",height:this.height+"px",zIndex:this.zValue,transform:this.rotate?"rotate("+this.rotate+"deg)":void 0}},this.characters.map((function(e){return e.text})).join(""))},t=Object(i.c)([Object(r.a)({props:["content","props","template","styleGuide","z","variable"]})],t)}(a.a);a.a.component("text-renderer",Pe);var Ie=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"url",{get:function(){return re(this.content,{variable:this.variable,props:this.props})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return ne("width",this.content,{variable:this.variable,props:this.props})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return ne("height",this.content,{variable:this.variable,props:this.props})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return U(this.props,"x",this.content,this.template,this.styleGuide)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return U(this.props,"y",this.content,this.template,this.styleGuide)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zValue",{get:function(){return this.z+U(this.props,"z",this.content,this.template,this.styleGuide)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return ae(this.content,{variable:this.variable,props:this.props})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageLoader",{get:function(){var e=new ze;return ue(this.url).then((function(t){e.result=t})),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"base64",{get:function(){if(this.content.base64)return this.content.base64;if(void 0!==this.content.opacity&&this.imageLoader.result){var e=pe(this.imageLoader.result,this.content.opacity);if(e)return e.toDataURL()}return this.url},enumerable:!0,configurable:!0}),t.prototype.render=function(e){return e("img",{style:{width:this.width+"px",height:this.height+"px",position:"absolute",left:this.x+"px",top:this.y+"px",zIndex:this.zValue,transform:this.rotate?"rotate("+this.rotate+"deg)":void 0},attrs:{src:this.base64}})},t=Object(i.c)([Object(r.a)({props:["content","props","template","styleGuide","z","variable"]})],t)}(a.a);a.a.component("image-renderer",Ie);var _e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"width",{get:function(){return ne("width",this.content,{variable:this.variable,props:this.props})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return ne("height",this.content,{variable:this.variable,props:this.props})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return U(this.props,"x",this.content,this.template,this.styleGuide)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return U(this.props,"y",this.content,this.template,this.styleGuide)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zValue",{get:function(){return this.z+U(this.props,"z",this.content,this.template,this.styleGuide)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return ae(this.content,{variable:this.variable,props:this.props})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return ce(this.content,{variable:this.variable,props:this.props})},enumerable:!0,configurable:!0}),t.prototype.render=function(e){return e("div",{style:{width:this.width+"px",height:this.height+"px",position:"absolute",left:this.x+"px",top:this.y+"px",backgroundColor:this.color,zIndex:this.zValue,transform:this.rotate?"rotate("+this.rotate+"deg)":void 0}})},t=Object(i.c)([Object(r.a)({props:["content","props","template","styleGuide","z","variable"]})],t)}(a.a);a.a.component("color-renderer",_e);var ze=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.result=null,t}return Object(i.d)(t,e),t=Object(i.c)([r.a],t)}(a.a),Me=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"canvasStyle",{get:function(){return{position:"absolute",width:this.canvasState.canvasWidth+"px",height:this.canvasState.canvasHeight+"px",overflow:"hidden",backgroundColor:"#ddd"}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"styleGuideStyle",{get:function(){return{transform:"scale("+this.canvasState.styleGuideScale+") translate("+this.canvasState.styleGuideTranslateX+"px, "+this.canvasState.styleGuideTranslateY+"px)",width:this.canvasState.styleGuideWidth+"px",height:this.canvasState.styleGuideHeight+"px"}},enumerable:!0,configurable:!0}),t.prototype.getTemplateStyle=function(e){return{left:e.x+"px",top:e.y+"px",position:"absolute",zIndex:Math.round(e.z||0)}},t.prototype.getNameStyle=function(e){return{position:"absolute",top:"-"+Q+"px",lineHeight:Q+"px",fontSize:"12px",width:(e.name?e.name.length*Q:0)+"px",zIndex:Math.round(e.z||0),transform:"scale("+1/this.canvasState.styleGuideScale+")",transformOrigin:"left bottom"}},t=Object(i.c)([Object(r.a)({render:w,staticRenderFns:k,props:["canvasState"],components:{"template-renderer":Ee}})],t)}(a.a),Ce=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"draggingAreaStyle",{get:function(){return{position:"absolute",border:"1px dashed black",left:Math.min(this.canvasState.mousedownX,this.canvasState.mouseupX)+"px",top:Math.min(this.canvasState.mousedownY,this.canvasState.mouseupY)+"px",width:Math.abs(this.canvasState.mousedownX-this.canvasState.mouseupX)+"px",height:Math.abs(this.canvasState.mousedownY-this.canvasState.mouseupY)+"px"}},enumerable:!0,configurable:!0}),t=Object(i.c)([Object(r.a)({render:y,staticRenderFns:v,props:["canvasState"]})],t)}(a.a);function Te(e,t){var n,a,r,s,o,c;try{for(var l=Object(i.h)(e.targetNameRegions),p=l.next();!p.done;p=l.next()){var u=p.value;(!o||u.z>=o.z)&&K(t,u)&&(o=u)}}catch(e){n={error:e}}finally{try{p&&!p.done&&(a=l.return)&&a.call(l)}finally{if(n)throw n.error}}if(o)return{kind:"template",region:o};try{for(var d=Object(i.h)(e.targetContentRegions),h=d.next();!h.done;h=d.next()){var y=h.value;(!c||y.z>=c.z)&&K(t,y)&&(c=y)}}catch(e){r={error:e}}finally{try{h&&!h.done&&(s=d.return)&&s.call(d)}finally{if(r)throw r.error}}if(c)return{kind:"content",region:c};var v=Re(e,t);return v?{kind:"template",region:v}:void 0}function Re(e,t){var n,a,r;try{for(var s=Object(i.h)(e.targetTemplateRegions),o=s.next();!o.done;o=s.next()){var c=o.value;(!r||(c.z||0)>=(r.z||0))&&K(t,c)&&(r=c)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}return r}function We(e,t){var n,a,r,s,o,c;if("template"===e.selection.kind){try{for(var l=Object(i.h)(e.allNameRegions),p=l.next();!p.done;p=l.next()){var u=p.value;if(K(t,u))return{kind:"move",offsetX:u.x,offsetY:u.y+Q/e.styleGuideScale,rotate:0}}}catch(e){n={error:e}}finally{try{p&&!p.done&&(a=l.return)&&a.call(l)}finally{if(n)throw n.error}}try{for(var d=Object(i.h)(e.allTemplateRegions),h=d.next();!h.done;h=d.next()){var y=h.value;if(!y.parent)if(b=Ne(t,y))return{kind:b,offsetX:y.x,offsetY:y.y,rotate:0};if(K(t,y))return y.parent?{kind:"move",offsetX:y.parent.content.x,offsetY:y.parent.content.y,rotate:0,content:y.parent.content}:{kind:"move",offsetX:y.x,offsetY:y.y,rotate:0}}}catch(e){r={error:e}}finally{try{h&&!h.done&&(s=d.return)&&s.call(d)}finally{if(r)throw r.error}}}else if("content"===e.selection.kind){var v=e.selection.content;try{for(var f=Object(i.h)(e.allContentRegions),g=f.next();!g.done;g=f.next()){var m=g.value,x=m.rotates.reduce((function(e,t){return e+t.rotate}),0);if("reference"!==m.content.kind){var b;if(Ye(t,m,e.styleGuideScale))return{kind:"grab",offsetX:m.x+m.width/2,offsetY:m.y+m.height/2,rotate:x};if(b=Ne(t,m))return{kind:b,offsetX:v.x,offsetY:v.y,rotate:x}}if(K(t,m))return{kind:"move",offsetX:v.x,offsetY:v.y,rotate:x}}}catch(e){o={error:e}}finally{try{g&&!g.done&&(c=f.return)&&c.call(f)}finally{if(o)throw o.error}}}}function Ye(e,t,n){e=F(e,t);var i=qe/n,a=$e/n;return K(e,{x:t.x+t.width/2-i/2,y:t.y-a-i,width:i,height:i})}function Ne(e,t){if(t.rotate&&(e=F(e,t)),Math.abs(e.x-t.x)<=Ve){if(e.y<t.y-Ve)return;return e.y<t.y+Ve?"left-top":e.y<t.y+t.height-Ve?"left":e.y<t.y+t.height+Ve?"left-bottom":void 0}if(Math.abs(e.x-t.x-t.width)<=Ve){if(e.y<t.y-Ve)return;return e.y<t.y+Ve?"right-top":e.y<t.y+t.height-Ve?"right":e.y<t.y+t.height+Ve?"right-bottom":void 0}return Math.abs(e.y-t.y)<=Ve?e.x>t.x+Ve&&e.x<t.x+t.width-Ve?"top":void 0:Math.abs(e.y-t.y-t.height)<=Ve&&e.x>t.x+Ve&&e.x<t.x+t.width-Ve?"bottom":void 0}function Xe(e,t,n){"snapshot"===e.kind?e.snapshot[t]=Z(n):"reference"!==e.kind&&(e[t]=Z(n))}function He(e,t,n){e[t]=Z(e[t]-n)}var Ve=5,$e=40,qe=10,Ae=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"selectionRegions",{get:function(){return"template"===this.canvasState.selection.kind?this.canvasState.allTemplateRegions:"content"===this.canvasState.selection.kind?this.canvasState.allContentRegions:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canResizeRegions",{get:function(){return"template"===this.canvasState.selection.kind?this.canvasState.allTemplateRegions.filter((function(e){return!e.parent})):"content"===this.canvasState.selection.kind?this.canvasState.allContentRegions.filter((function(e){return"reference"!==e.content.kind})):[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canRotateRegion",{get:function(){if("content"===this.canvasState.selection.kind)return this.canvasState.allContentRegions.find((function(e){return"reference"!==e.content.kind}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvasStyle",{get:function(){return{position:"absolute",width:this.canvasState.canvasWidth+"px",height:this.canvasState.canvasHeight+"px",overflow:"hidden"}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"styleGuideStyle",{get:function(){return{transform:"scale("+this.canvasState.styleGuideScale+") translate("+this.canvasState.styleGuideTranslateX+"px, "+this.canvasState.styleGuideTranslateY+"px)",width:this.canvasState.styleGuideWidth+"px",height:this.canvasState.styleGuideHeight+"px"}},enumerable:!0,configurable:!0}),t.prototype.getSelectionAreaStyle=function(e){return Object(i.a)(Object(i.a)({},this.getResizeStyle(e)),{border:1/this.canvasState.styleGuideScale+"px solid green"})},t.prototype.getResizeStyle=function(e){return{left:e.x+"px",top:e.y+"px",width:e.width+"px",height:e.height+"px",transform:e.rotate?"rotate("+e.rotate+"deg)":void 0,position:"absolute"}},Object.defineProperty(t.prototype,"rotateAreaStyle",{get:function(){if(this.canRotateRegion)return this.getResizeStyle(this.canRotateRegion)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotateRegion",{get:function(){if(this.rotateAreaStyle){var e=$e/this.canvasState.styleGuideScale,t=1/this.canvasState.styleGuideScale;return{left:"calc(50% - "+t/2+"px)",top:-e+"px",width:Math.max(t,1)+"px",height:e+"px",position:"absolute",backgroundColor:"green"}}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotateCircleRegion",{get:function(){if(this.rotateAreaStyle){var e=$e/this.canvasState.styleGuideScale,t=1/this.canvasState.styleGuideScale,n=qe/this.canvasState.styleGuideScale;return{left:"calc(50% - "+(t/2+n/2)+"px)",top:-e-n+"px",width:n+"px",height:n+"px",position:"absolute",border:Math.max(t,1)+"px solid green",backgroundColor:"white",borderRadius:n/2+"px"}}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resizeRegions",{get:function(){var e=Ve/this.canvasState.styleGuideScale,t=1/this.canvasState.styleGuideScale,n=e/2,a=e/2-t,r={width:e+"px",height:e+"px",border:t+"px solid green",position:"absolute",backgroundColor:"white"};return[Object(i.a)({left:-n+"px",top:-n+"px"},r),Object(i.a)({left:-n+"px",bottom:-a+"px"},r),Object(i.a)({right:-a+"px",top:-n+"px"},r),Object(i.a)({right:-a+"px",bottom:-a+"px"},r),Object(i.a)({left:-n+"px",top:"calc(50% - "+n+"px)"},r),Object(i.a)({left:"calc(50% - "+n+"px)",top:-n+"px"},r),Object(i.a)({left:"calc(50% - "+n+"px)",bottom:-a+"px"},r),Object(i.a)({top:"calc(50% - "+n+"px)",right:-a+"px"},r)]},enumerable:!0,configurable:!0}),t=Object(i.c)([Object(r.a)({render:E,staticRenderFns:G,props:["canvasState"]})],t)}(a.a),Ke=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"canvasStyle",{get:function(){return{position:"absolute",width:this.canvasState.canvasWidth+"px",height:this.canvasState.canvasHeight+"px",overflow:"hidden"}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"styleGuideStyle",{get:function(){return{transform:"scale("+this.canvasState.styleGuideScale+") translate("+this.canvasState.styleGuideTranslateX+"px, "+this.canvasState.styleGuideTranslateY+"px)",width:this.canvasState.styleGuideWidth+"px",height:this.canvasState.styleGuideHeight+"px"}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hoverStyle",{get:function(){var e=Te(this.canvasState,{x:this.canvasState.mappedX,y:this.canvasState.mappedY});if(e){var t="content"===e.kind?e.region:e.region.template;return{left:t.x+"px",top:t.y+"px",width:t.width+"px",height:t.height+"px",transform:t.rotate?"rotate("+t.rotate+"deg)":void 0,position:"absolute",backgroundColor:"green",opacity:.1}}},enumerable:!0,configurable:!0}),t=Object(i.c)([Object(r.a)({render:m,staticRenderFns:x,props:["canvasState"]})],t)}(a.a);var Fe=["ew-resize","nwse-resize","ns-resize","nesw-resize"];function De(e,t){if("move"===e||"grab"===e||"grabbing"===e)return e;var n=0;if("content"===t.selection.kind&&"reference"!==t.selection.content.kind&&"snapshot"!==t.selection.content.kind&&t.selection.content.rotate){var i=t.selection.content.rotate%180;i>22.5?i<67.5?n+=1:i<112.5?n+=2:i<157.5&&(n+=3):i<-22.5&&(i>-67.5?n+=3:i>-112.5?n+=2:i>-157.5&&(n+=1))}return"top"===e||"bottom"===e?Fe[(n+2)%4]:"right"===e||"left"===e?Fe[n%4]:"right-top"===e||"left-bottom"===e?Fe[(n+3)%4]:Fe[(n+1)%4]}var Le=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.draggingSelectionOffsetX=0,t.draggingSelectionOffsetY=0,t.draggingSelectionRotate=0,t.clipboard={kind:"none"},t.mouseIsDown=!1,t.draggingSelectionWidth=0,t.draggingSelectionHeight=0,t.draggingSelectionX=0,t.draggingSelectionY=0,t}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"maskStyle",{get:function(){var e;if(this.canvasState.addKind)e="grabbing";else if(this.canvasState.hasRelationWithSelection)e=this.draggingSelectionKind?De(this.draggingSelectionKind,this.canvasState):"move";else{var t=We(this.canvasState,{x:this.canvasState.mappedX,y:this.canvasState.mappedY});e=t?De(t.kind,this.canvasState):this.canvasState.isDraggingForSelection?"crosshair":"auto"}return{position:"absolute",width:this.canvasState.canvasWidth+"px",height:this.canvasState.canvasHeight+"px",opacity:0,cursor:e}},enumerable:!0,configurable:!0}),t.prototype.wheel=function(e){if(e.ctrlKey){e.preventDefault(),e.stopImmediatePropagation();var t=1;e.deltaY>0?t=.98*this.canvasState.styleGuideScale:e.deltaY<0&&(t=this.canvasState.styleGuideScale/.98);var n=(e.offsetX-this.canvasState.mapX(e.offsetX)*t-this.canvasState.styleGuideWidth/2)/t+this.canvasState.styleGuideWidth/2,i=(e.offsetY-this.canvasState.mapY(e.offsetY)*t-this.canvasState.styleGuideHeight/2)/t+this.canvasState.styleGuideHeight/2;this.canvasState.styleGuideScale=t,this.canvasState.styleGuideTranslateX=n,this.canvasState.styleGuideTranslateY=i}else this.canvasState.styleGuideTranslateX-=e.deltaX/this.canvasState.styleGuideScale,this.canvasState.styleGuideTranslateY-=e.deltaY/this.canvasState.styleGuideScale},t.prototype.mousedown=function(e){if(this.mouseIsDown=!0,this.canvasState.addKind){this.canvasState.action();var t=this.canvasState.mapX(e.offsetX),n=this.canvasState.mapY(e.offsetY);if("template"===this.canvasState.addKind){var i={id:Math.random().toString(),x:Z(t-250),y:Z(n-150),width:500,height:300,contents:[]};this.canvasState.styleGuide.templates.push(i),this.canvasState.selection={kind:"template",template:i}}else{var a=Re(this.canvasState,{x:t,y:n});if(a){var r=Z(t-a.template.x-50),s=Z(n-a.template.y-50);if("text"===this.canvasState.addKind){var o={kind:"text",text:"",color:"#000000",fontFamily:"Aria",fontSize:12,x:r,y:s,width:100,height:100};a.template.contents.push(o),this.canvasState.selection={kind:"content",content:o,template:a.template}}else if("image"===this.canvasState.addKind){o={kind:"image",url:"",x:r,y:s,width:100,height:100};a.template.contents.push(o),this.canvasState.selection={kind:"content",content:o,template:a.template}}else if("color"===this.canvasState.addKind){o={kind:"color",color:"#000",x:r,y:s,width:100,height:100};a.template.contents.push(o),this.canvasState.selection={kind:"content",content:o,template:a.template}}}}this.canvasState.addKind=void 0}else{this.canvasState.mousedownX=e.offsetX,this.canvasState.mousedownY=e.offsetY,this.canvasState.mouseupX=e.offsetX,this.canvasState.mouseupY=e.offsetY,this.canvasState.mousePressing=!0;var c=We(this.canvasState,{x:this.canvasState.mousedownMappedX,y:this.canvasState.mousedownMappedY});if(this.canvasState.hasRelationWithSelection=!!c,c)if(this.draggingSelectionOffsetX=c.offsetX,this.draggingSelectionOffsetY=c.offsetY,this.draggingSelectionRotate=c.rotate,this.draggingSelectionContent=c.content,"grab"===c.kind?this.draggingSelectionKind="grabbing":this.draggingSelectionKind=c.kind,"template"===this.canvasState.selection.kind)this.draggingSelectionWidth=this.canvasState.selection.template.width,this.draggingSelectionHeight=this.canvasState.selection.template.height;else if("content"===this.canvasState.selection.kind){var l=this.canvasState.selection.content;"reference"!==l.kind&&(this.draggingSelectionX=l.x,this.draggingSelectionY=l.y,"snapshot"===l.kind?(this.draggingSelectionWidth=l.snapshot.width,this.draggingSelectionHeight=l.snapshot.height):(this.draggingSelectionWidth=l.width,this.draggingSelectionHeight=l.height))}}},t.prototype.mousemove=function(e){if(this.canvasState.x=e.offsetX,this.canvasState.y=e.offsetY,this.canvasState.mousePressing&&(this.canvasState.mouseupX=e.offsetX,this.canvasState.mouseupY=e.offsetY),this.canvasState.hasRelationWithSelection)if("template"===this.canvasState.selection.kind){var t=this.canvasState.mouseupMappedX-this.canvasState.mousedownMappedX+this.draggingSelectionOffsetX,n=this.canvasState.mouseupMappedY-this.canvasState.mousedownMappedY+this.draggingSelectionOffsetY;if(this.draggingSelectionContent)this.draggingSelectionContent.x=Z(t),this.draggingSelectionContent.y=Z(n);else if(this.draggingSelectionKind){var i=this.canvasState.selection.template;if("move"===this.draggingSelectionKind)return i.x=Z(t),void(i.y=Z(n));!function(e,t,n,i,a,r){var s=t-e.x,o=n-e.y;r.includes("left")&&(He(e,"width",s),e.x=Z(t)),r.includes("right")&&(e.width=Z(i+s)),r.includes("top")&&(He(e,"height",o),e.y=Z(n)),r.includes("bottom")&&(e.height=Z(a+o))}(i,t,n,this.draggingSelectionWidth,this.draggingSelectionHeight,this.draggingSelectionKind)}}else if("content"===this.canvasState.selection.kind){if("flex"===this.canvasState.selection.template.display||!this.draggingSelectionKind)return;var r=this.canvasState.selection.content,s=D({x:this.canvasState.mouseupMappedX-this.canvasState.mousedownMappedX,y:this.canvasState.mouseupMappedY-this.canvasState.mousedownMappedY},{x:0,y:0},this.draggingSelectionRotate);t=s.x+this.draggingSelectionOffsetX,n=s.y+this.draggingSelectionOffsetY;if("move"===this.draggingSelectionKind)return r.x=Z(t),void(r.y=Z(n));if("grabbing"===this.draggingSelectionKind&&"reference"!==r.kind){var o=function(e,t){return e>0?Z(Math.atan(t/e)/Math.PI*180+90):we(e,0)?t>0?180:t<0?0:void 0:Z(Math.atan(t/e)/Math.PI*180-90)}(this.canvasState.mouseupMappedX-this.draggingSelectionOffsetX,this.canvasState.mouseupMappedY-this.draggingSelectionOffsetY);return void(void 0!==o&&a.a.set(r,"rotate",o-this.draggingSelectionRotate))}!function(e,t,n,i,a,r,s,o){var c="reference"!==e.kind&&e.rotate?D({x:t,y:n},{x:i,y:a},e.rotate):{x:t,y:n},l=c.x-i,p=c.y-a,u=i,d=a,h=r,y=s;if(o.includes("left"))if(h-=l,"reference"!==e.kind&&e.rotate){var v=e.rotate*Math.PI/180,f=(h-r)/2;u-=(Math.cos(v)+1)*f,d-=Math.sin(v)*f}else u=t;if(o.includes("right")&&(h+=l,"reference"!==e.kind&&e.rotate)){v=e.rotate*Math.PI/180,f=(h-r)/2;u+=(Math.cos(v)-1)*f,d+=Math.sin(v)*f}if(o.includes("top"))if(y-=p,"reference"!==e.kind&&e.rotate){v=e.rotate*Math.PI/180;var g=(y-s)/2;u+=Math.sin(v)*g,d-=(Math.cos(v)+1)*g}else d=n;if(o.includes("bottom")&&(y+=p,"reference"!==e.kind&&e.rotate)){v=e.rotate*Math.PI/180,g=(y-s)/2;u-=Math.sin(v)*g,d+=(Math.cos(v)-1)*g}e.x=Z(u),e.y=Z(d),Xe(e,"width",h),Xe(e,"height",y)}(r,t,n,this.draggingSelectionX,this.draggingSelectionY,this.draggingSelectionWidth,this.draggingSelectionHeight,this.draggingSelectionKind)}},t.prototype.mouseup=function(e){if(this.mouseIsDown){if(this.mouseIsDown=!1,this.canvasState.mouseupX=e.offsetX,this.canvasState.mouseupY=e.offsetY,this.canvasState.hasRelationWithSelection){var t=(this.canvasState.styleGuideTranslateX-this.canvasState.styleGuideWidth/2)*this.canvasState.styleGuideScale+this.canvasState.styleGuideWidth/2,n=(this.canvasState.styleGuideTranslateY-this.canvasState.styleGuideHeight/2)*this.canvasState.styleGuideScale+this.canvasState.styleGuideHeight/2;if(this.canvasState.hasRelationWithSelection=!1,this.canvasState.styleGuideTranslateX=(t-this.canvasState.styleGuideWidth/2)/this.canvasState.styleGuideScale+this.canvasState.styleGuideWidth/2,this.canvasState.styleGuideTranslateY=(n-this.canvasState.styleGuideHeight/2)/this.canvasState.styleGuideScale+this.canvasState.styleGuideHeight/2,this.canvasState.mousePressing=!1,this.canvasState.moved)return}var a=this.canvasState.mouseupMappedX,r=this.canvasState.mouseupMappedY;if(this.canvasState.isDraggingForSelection){var s=function(e,t,n){var a,r,s,o={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),width:Math.abs(t.x-n.x),height:Math.abs(t.y-n.y)};try{for(var c=Object(i.h)(e.targetTemplateRegions),l=c.next();!l.done;l=c.next()){var p=l.value,u=[{x:p.x,y:p.y},{x:p.x+p.width,y:p.y+p.height}];(!s||p.z>=s.z)&&K(u,o)&&(s=p)}}catch(e){a={error:e}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(a)throw a.error}}return s?s.template:null}(this.canvasState,{x:a,y:r},{x:this.canvasState.mousedownMappedX,y:this.canvasState.mousedownMappedY});this.canvasState.selection=s?{kind:"template",template:s}:{kind:"none"}}else{var o=Te(this.canvasState,{x:a,y:r});o?"content"===o.kind?this.canvasState.selection={kind:"content",content:o.region.content,template:o.region.template}:"template"===o.kind&&(this.canvasState.selection={kind:"template",template:o.region.template}):this.canvasState.selection={kind:"none"}}this.canvasState.mousePressing=!1}},t.prototype.contextmenu=function(e){this.canvasState.contextMenuEnabled=!0,this.canvasState.contextMenuX=e.offsetX,this.canvasState.contextMenuY=e.offsetY,this.canvasState.mousePressing=!1,e.preventDefault()},t.prototype.keydown=function(e){if(e.ctrlKey||e.metaKey)if("c"===e.key)"none"!==this.canvasState.selection.kind&&(this.clipboard=this.canvasState.selection);else if("v"===e.key){if("template"===this.clipboard.kind)if(this.canvasState.action(),"template"===this.canvasState.selection.kind){if(this.clipboard.template!==this.canvasState.selection.template){var t={kind:"reference",id:this.clipboard.template.id,x:0,y:0};this.canvasState.selection.template.contents.push(t),this.canvasState.selection={kind:"content",content:t,template:this.canvasState.selection.template}}}else if("none"===this.canvasState.selection.kind){var n=JSON.parse(JSON.stringify(this.clipboard.template));n.id=Math.random().toString(),n.x=0,n.y=0,this.canvasState.styleGuide.templates.push(n),this.canvasState.selection={kind:"template",template:n}}}else"z"===e.key&&this.canvasState.undo()},t=Object(i.c)([Object(r.a)({render:b,staticRenderFns:S,props:["canvasState"]})],t)}(a.a),Je=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"contextMenuStyle",{get:function(){return{position:"absolute",left:this.canvasState.contextMenuX+"px",top:this.canvasState.contextMenuY+"px",width:"100px",height:"200px",backgroundColor:"#eee"}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maskStyle",{get:function(){return{position:"absolute",width:this.canvasState.canvasWidth+"px",height:this.canvasState.canvasHeight+"px",opacity:0}},enumerable:!0,configurable:!0}),t.prototype.close=function(e){this.canvasState.contextMenuEnabled=!1,e.stopPropagation()},t.prototype.remove=function(){var e,t,n,a,r=this.canvasState.mapX(this.canvasState.contextMenuX),s=this.canvasState.mapY(this.canvasState.contextMenuY);if(this.canvasState.action(),"template"===this.canvasState.selection.kind)try{for(var o=Object(i.h)(this.canvasState.allTemplateRegions),c=o.next();!c.done;c=o.next()){var l=c.value;if(K({x:r,y:s},l)){if(!l.parent){for(var p=this.canvasState.styleGuide.templates.length-1;p>=0;p--){var u=this.canvasState.styleGuide.templates[p];if(u!==l.template)for(var d=u.contents.length-1;d>=0;d--){var h=u.contents[d];"reference"===h.kind&&h.id===l.template.id&&u.contents.splice(d,1)}else this.canvasState.styleGuide.templates.splice(p,1)}return}l.parent.template.contents.splice(l.parent.index,1)}}}catch(t){e={error:t}}finally{try{c&&!c.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}else if("content"===this.canvasState.selection.kind)try{for(var y=Object(i.h)(this.canvasState.allContentRegions),v=y.next();!v.done;v=y.next()){var f=v.value;return void f.contents.splice(f.index,1)}}catch(e){n={error:e}}finally{try{v&&!v.done&&(a=y.return)&&a.call(y)}finally{if(n)throw n.error}}},t=Object(i.c)([Object(r.a)({render:d,staticRenderFns:h,props:["canvasState"]})],t)}(a.a);function Ue(e,t,n){var a=document.createElement("canvas");a.width=e.width,a.height=e.height;var r=a.getContext("2d");return r&&(N(e,t),function(e,t,n,a){var r,s,o=[];e?(e.fillStyle="white",e.fillRect(0,0,t.width,t.height)):o.push("ctx.fillStyle = 'white'","ctx.fillRect(0, 0, "+t.width+", "+t.height+")");var c=[],l=ee(n.variables);(function e(t,n,a,r,s,o,c,l){var p,u,d=function(t){var p,u,d,h=Z(s.x+ie("x",t.content,{variable:c,props:l})),y=Z(s.y+ie("y",t.content,{variable:c,props:l})),v=Math.round(s.z+ie("z",t.content,{variable:c,props:l})),f=(d=ae(t.content,{variable:c,props:l})*Math.PI/180,Math.round(1e4*d)/1e4);if("symbol"!==t.kind){var g=ne("width",t.content,{variable:c,props:l}),m=ne("height",t.content,{variable:c,props:l}),x=Z(h+g/2),b=Z(y+m/2),S=function(e){var t,n;try{for(var a=(t=void 0,Object(i.h)(o)),r=a.next();!r.done;r=a.next()){var s=r.value;e.translate(s.x,s.y),e.rotate(s.rotate),e.translate(-s.x,-s.y)}}catch(e){t={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}f&&(e.translate(x,b),e.rotate(f),e.translate(-x,-b))},O=[];try{for(var j=(p=void 0,Object(i.h)(o)),w=j.next();!w.done;w=j.next()){var k=w.value;O.push("ctx.translate("+k.x+", "+k.y+")","ctx.rotate("+k.rotate+")","ctx.translate("+-k.x+", "+-k.y+")")}}catch(e){p={error:e}}finally{try{w&&!w.done&&(u=j.return)&&u.call(j)}finally{if(p)throw p.error}}f&&O.push("ctx.translate("+x+", "+b+")","ctx.rotate("+f+")","ctx.translate("+-x+", "+-b+")");var E=function(e){(f||o.length>0)&&e.setTransform(1,0,0,1,0,0)},G=f||o.length>0?["ctx.setTransform(1, 0, 0, 1, 0, 0)"]:[];if("text"===t.kind){var P=t.content;r.push({z:v,index:r.length,action:function(e){var t=oe(P,{variable:c,props:l}),n=ce(P,{variable:c,props:l}),a=P.characters||de(se(P,{variable:c,props:l}));return e?(e.fillStyle=n,e.textBaseline="top",e.font=t+"px "+P.fontFamily,S(e),e.fillText(a.map((function(e){return e.text})).join(""),h,y),E(e),[]):Object(i.g)(["ctx.fillStyle = "+n,"ctx.textBaseline = 'top'","ctx.font = "+t+"px "+P.fontFamily],O,["ctx.fillText("+a.map((function(e){return e.text})).join("")+", "+h+", "+y+")"],G)}})}else if("image"===t.kind){var I=t.content,_=re(I,{variable:c,props:l}),z=a[_];if(void 0!==I.opacity){var M=pe(z,I.opacity);M&&(z=M)}r.push({z:v,index:r.length,action:function(e){return e?(S(e),e.drawImage(z,h,y,g,m),E(e),[]):Object(i.g)(O,["ctx.drawImage("+_+", "+h+", "+y+", "+g+", "+m+")"],G)}})}else if("color"===t.kind){var C=t.content,T=ce(C,{variable:c,props:l});r.push({z:v,index:r.length,action:function(e){return e?(e.fillStyle=T,S(e),e.fillRect(h,y,g,m),E(e),[]):Object(i.g)(O,["ctx.fillStyle = "+C.color,"ctx.fillRect("+h+", "+y+", "+g+", "+m+")"],G)}})}}else if("symbol"===t.kind){var R=te(t.props,{variable:c,props:l}),W=o;if(f){var Y=ne("width",t.symbol,{variable:c,props:R}),N=ne("height",t.symbol,{variable:c,props:R});W=Object(i.g)(o,[{rotate:f,x:Z(h+Y/2),y:Z(y+N/2)}])}e(t.symbol,n,a,r,{x:h,y:y,z:v},W,c,R)}};try{for(var h=Object(i.h)(ke(t,n)),y=h.next();!y.done;y=h.next()){var v=y.value;d(v)}}catch(e){p={error:e}}finally{try{y&&!y.done&&(u=h.return)&&u.call(h)}finally{if(p)throw p.error}}})(t,n,a,c,{x:0,y:0,z:0},[],l),c.sort((function(e,t){return e.z!==t.z?e.z-t.z:e.index-t.index}));try{for(var p=Object(i.h)(c),u=p.next();!u.done;u=p.next()){var d=u.value.action;o.push.apply(o,Object(i.g)(d(e)))}}catch(e){r={error:e}}finally{try{u&&!u.done&&(s=p.return)&&s.call(p)}finally{if(r)throw r.error}}}(r,e,t,n)),a.toDataURL("image/jpeg")}function Be(e,t){return Object(i.b)(this,void 0,void 0,(function(){var n,a,r,s,o;return Object(i.e)(this,(function(c){switch(c.label){case 0:return function e(t,n,a){var r,s,o=function(t){if(t.hidden)return"continue";if("image"===t.kind){if(t.base64&&a[t.base64])return"continue";if(a[t.url])return"continue";t.base64?a[t.url]=ue(t.base64):a[t.url]=ue(t.url)}else if("reference"===t.kind){var i=n.templates.find((function(e){return e.id===t.id}));i&&e(i,n,a)}else"snapshot"===t.kind&&e(t.snapshot,n,a)};try{for(var c=Object(i.h)(t.contents),l=c.next();!l.done;l=c.next()){var p=l.value;o(p)}}catch(e){r={error:e}}finally{try{l&&!l.done&&(s=c.return)&&s.call(c)}finally{if(r)throw r.error}}}(e,t,n={}),a=Object.keys(n).map((function(e){return{url:e,resource:n[e]}})),[4,Promise.all(a.map((function(e){return e.resource})))];case 1:for(r=c.sent(),s={},o=0;o<a.length;o++)s[a[o].url]=r[o];return[2,s]}}))}))}var Qe={type:"string",title:"字符串",propertyName:"value",requiredWhen:["type","===","StringLiteral"],propertyOrder:1},Ze={type:"number",title:"数字",propertyName:"value",requiredWhen:["type","===","NumericLiteral"],propertyOrder:1},et={name:{type:"string",title:"名称",requiredWhen:["type","===","Identifier"],propertyOrder:1}},tt=["NumericLiteral","StringLiteral","BooleanLiteral","NullLiteral","ArrayExpression","ObjectExpression","Identifier","ThisExpression","BinaryExpression","LogicalExpression","UnaryExpression","MemberExpression","ConditionalExpression","CallExpression","ArrowFunctionExpression"],nt=["数字","字符串","布尔值","null","数组","对象","标记符","this","二元表达式","逻辑表达式","一元表达式","取成员","条件表达式","函数调用","箭头函数"],it=Object(i.a)(Object(i.a)({stringValue:Qe,numericValue:Ze,booleanValue:{type:"boolean",title:"值",propertyName:"value",requiredWhen:["type","===","BooleanLiteral"],propertyOrder:1}},et),{binaryOperator:{type:"string",title:"运算符",propertyName:"operator",enum:["**","*","/","%","+","-","<<",">>",">>>",">","<",">=","<=","==","!=","===","!==","&","^","|","|>"],enumTitles:["幂乘","乘","除","除余","加","减","按位左移","按位右移","按位无符号右移","大于","小于","大于等于","小于等于","等于","不等于","全等于","不全等于","位与","位异或","位或","管道"],requiredWhen:["type","===","BinaryExpression"],propertyOrder:2},unaryOperator:{type:"string",title:"运算符",propertyName:"operator",enum:["+","-","!","~","%","await"],enumTitles:["正","负","非","位非","百分比","异步等待"],requiredWhen:["type","===","UnaryExpression"],propertyOrder:2},logicalOperator:{type:"string",title:"运算符",propertyName:"operator",enum:["||","&&","??"],enumTitles:["或","且","空值或"],requiredWhen:["type","===","LogicalExpression"],propertyOrder:2},left:{type:void 0,$ref:"#/definitions/expression",title:"左操作符",requiredWhen:["type","in",["BinaryExpression","LogicalExpression"]],propertyOrder:1},right:{type:void 0,$ref:"#/definitions/expression",title:"右操作符",requiredWhen:["type","in",["BinaryExpression","LogicalExpression"]],propertyOrder:3},argument:{type:void 0,$ref:"#/definitions/expression",title:"参数",requiredWhen:["type","===","UnaryExpression"],propertyOrder:3},object:{type:void 0,$ref:"#/definitions/expression",title:"对象",requiredWhen:["type","===","MemberExpression"],propertyOrder:1},property:{type:void 0,$ref:"#/definitions/expression",title:"属性",requiredWhen:["type","===","MemberExpression"],propertyOrder:2},optional:{type:"boolean",title:"可选",optionalWhen:["type","in",["MemberExpression","CallExpression"]],propertyOrder:3},test:{type:void 0,$ref:"#/definitions/expression",title:"条件",requiredWhen:["type","===","ConditionalExpression"],propertyOrder:1},consequent:{type:void 0,$ref:"#/definitions/expression",title:"真值",requiredWhen:["type","===","ConditionalExpression"],propertyOrder:2},alternate:{type:void 0,$ref:"#/definitions/expression",title:"假值",requiredWhen:["type","===","ConditionalExpression"],propertyOrder:3},callee:{type:void 0,$ref:"#/definitions/expression",title:"函数名",requiredWhen:["type","===","CallExpression"],propertyOrder:1},arguments:{type:"array",title:"参数",items:{type:void 0,$ref:"#/definitions/expressionWithSpreadElement"},requiredWhen:["type","===","CallExpression"],propertyOrder:2},elements:{type:"array",title:"项",items:{type:void 0,$ref:"#/definitions/expressionWithSpreadElement"},requiredWhen:["type","===","ArrayExpression"],propertyOrder:2},properties:{type:"array",title:"属性",items:{type:void 0,$ref:"#/definitions/propertyWithSpreadElement",title:"属性项"},requiredWhen:["type","===","ObjectExpression"],propertyOrder:2},params:{type:"array",title:"参数",items:{type:void 0,$ref:"#/definitions/pattern"},requiredWhen:["type","===","ArrowFunctionExpression"],propertyOrder:1},body:{type:void 0,$ref:"#/definitions/expression",title:"函数体",requiredWhen:["type","===","ArrowFunctionExpression"],propertyOrder:1}}),at={type:void 0,$ref:"#/definitions/expression",definitions:{expression:{type:"object",title:"表达式",properties:Object(i.a)({type:{type:"string",title:"类别",enum:tt,enumTitles:nt,propertyOrder:0}},it),required:["type"]},propertyWithSpreadElement:{type:"object",properties:{type:{type:"string",title:"类别",enum:["Property","SpreadElement"],enumTitles:["属性","展开"],propertyOrder:0},key:{type:void 0,$ref:"#/definitions/propertyKey",title:"字段名称",requiredWhen:["type","===","Property"],propertyOrder:1},value:{type:void 0,$ref:"#/definitions/expression",title:"值",requiredWhen:["type","===","Property"],propertyOrder:2},shorthand:{type:"boolean",title:"简写",requiredWhen:["type","===","Property"],propertyOrder:3},argument:{type:void 0,$ref:"#/definitions/expression",title:"参数",requiredWhen:["type","===","SpreadElement"],propertyOrder:1}},required:["type"]},propertyKey:{type:"object",properties:Object(i.a)({type:{type:"string",title:"类别",enum:["NumericLiteral","StringLiteral","Identifier"],enumTitles:["数字","字符串","标识符"],propertyOrder:0},stringValue:Qe,numericValue:Ze},et),required:["type"]},expressionWithSpreadElement:{type:"object",properties:Object(i.a)(Object(i.a)({type:{type:"string",enum:Object(i.g)(tt,["SpreadElement"]),enumTitles:Object(i.g)(nt,["展开"]),propertyOrder:0}},it),{spreadElementArgument:{type:void 0,$ref:"#/definitions/expression",propertyName:"argument",requiredWhen:["type","===","SpreadElement"],propertyOrder:1}}),required:["type"]},pattern:{type:"object",properties:Object(i.a)(Object(i.a)({type:{type:"string",title:"类别",enum:["Identifier","AssignmentPattern","RestElement"],enumTitles:["标识符参数","带默认值参数","剩余参数"],propertyOrder:0}},et),{left:{type:"object",title:"标识符",properties:Object(i.a)({type:{type:"string",title:"类别",enum:["Identifier"],enumTitles:["标识符"],propertyOrder:0}},et),requiredWhen:["type","===","AssignmentPattern"],propertyOrder:1,required:["type"]},right:{type:void 0,$ref:"#/definitions/expression",title:"默认值",requiredWhen:["type","===","AssignmentPattern"],propertyOrder:2},argument:{type:"object",title:"参数",properties:Object(i.a)({type:{type:"string",enum:["Identifier"],enumTitles:["标识符"],propertyOrder:0}},et),requiredWhen:["type","===","RestElement"],propertyOrder:1,required:["type"]}}),required:["type"]}}},rt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=at,t.editorStyle={position:"fixed",right:"300px",left:"0px",top:"50px",backgroundColor:"white",zIndex:1,height:t.canvasState.canvasHeight+"px",overflow:"auto"},t}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"ast",{get:function(){if(this.expression)return Object($.c)(Object($.g)(this.expression))},enumerable:!0,configurable:!0}),t.prototype.updateValue=function(e){if(e.isValid){var t=Object($.e)(e.value);t!==this.expression&&this.$emit("change",t)}},t=Object(i.c)([Object(r.a)({render:f,staticRenderFns:g,props:["canvasState","expression"]})],t)}(a.a),st=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.editingAst=!1,t}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this.expressionId||""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"presetExpression",{get:function(){var e=this;if(this.id)return this.canvasState.presetExpressions.find((function(t){return t.id===e.id}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentTokens",{get:function(){return this.expression?Object($.g)(this.expression):[]},enumerable:!0,configurable:!0}),t.prototype.emitChange=function(e){this.$emit("change",e)},t.prototype.render=function(e){var t=this,n=this.renderInput(e);return e("span",[e("select",{domProps:{value:this.id?this.id:void 0===this.expression&&this.literalType?"literal":"f(x)"},on:{change:function(e){var n=e.target.value;if("literal"===n)t.emitChange({});else if("f(x)"===n)t.emitChange({expression:t.expression||""});else{var a=t.canvasState.presetExpressions.find((function(e){return e.id===n}));a&&(t.expression&&function(e,t){var n,a,r=Object($.g)(e.expression);if(r.length!==t.length)return!1;var s=[];try{for(var o=Object(i.h)(e.variables),c=o.next();!c.done;c=o.next()){var l=c.value;"string"!=typeof l&&s.push(l.tokenIndex)}}catch(e){n={error:e}}finally{try{c&&!c.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}for(var p=0;p<r.length;p++){var u=r[p],d=t[p];if(u.type!==d.type)return!1;if(!s.includes(p)){if("Identifier"===u.type&&"Identifier"===d.type&&u.name!==d.name)return!1;if("BooleanLiteral"===u.type&&"BooleanLiteral"===d.type&&u.value!==d.value)return!1;if("KeywordToken"===u.type&&"KeywordToken"===d.type&&u.name!==d.name)return!1;if("NumericLiteral"===u.type&&"NumericLiteral"===d.type&&u.value!==d.value)return!1;if("PunctuatorToken"===u.type&&"PunctuatorToken"===d.type&&u.value!==d.value)return!1;if("StringLiteral"===u.type&&"StringLiteral"===d.type&&u.value!==d.value)return!1}}return!0}(a,t.currentTokens)?t.emitChange({expression:t.expression,expressionId:n}):t.emitChange({expression:a.expression,expressionId:n}))}}}},this.renderTypeOptions(e)),e("div",{style:{marginLeft:"20px"}},n)])},t.prototype.renderTypeOptions=function(e){var t=[];return this.literalType&&t.push(e("option",{key:"literal",attrs:{value:"literal"}},"literal")),t.push.apply(t,Object(i.g)([e("option",{key:"f(x)",attrs:{value:"f(x)"}},"f(x)")],this.canvasState.presetExpressions.map((function(t){return e("option",{key:t.id,attrs:{value:t.id}},t.name)})))),t},t.prototype.renderInput=function(e){var t,n=this,i=this.presetExpression;return i&&i.variables.every((function(e){return"string"==typeof e||e.tokenIndex<n.currentTokens.length}))?t=i.variables.map((function(t){if("string"==typeof t)return e("span",t);var a=n.currentTokens[t.tokenIndex];if("NumericLiteral"===a.type)return e("input",{attrs:{type:"number"},domProps:{value:a.value},style:{width:"50px"},on:{change:function(e){var t=ot(i.expression,e.target.value,a.range,"0");n.emitChange({expression:t,expressionId:n.expressionId})}}});if("StringLiteral"===a.type)return e("input",{attrs:{type:"text"},domProps:{value:a.value},on:{change:function(e){var t,r,s,o=(t=i.expression,r=e.target.value,s=a.range,t.substring(0,s[0]+1)+r+t.substring(s[1]-1));n.emitChange({expression:o,expressionId:n.expressionId})}}});if("Identifier"===a.type){if(t.enum||t.internal){var r=void 0;return r="component parameters"!==t.internal||"content"!==n.canvasState.selection.kind&&"template"!==n.canvasState.selection.kind?"variable"===t.internal?n.canvasState.styleGuide.variables?n.canvasState.styleGuide.variables.map((function(e){return{value:e.name,name:e.displayName||e.name}})):[]:t.enum?t.enum:[]:n.canvasState.selection.template.parameters||[],e("select",{domProps:{value:a.name},on:{change:function(e){var t=ot(i.expression,e.target.value,a.range,"a");n.emitChange({expression:t,expressionId:n.expressionId})}}},r.map((function(t){var n="string"==typeof t?t:t.name,i="string"==typeof t?t:t.value;return e("option",{key:i,attrs:{value:i}},n)})))}return e("input",{attrs:{type:"text"},domProps:{value:a.name},on:{change:function(e){var t=ot(i.expression,e.target.value,a.range,"a");n.emitChange({expression:t,expressionId:n.expressionId})}}})}return""})):void 0===this.expression&&this.literalType?t=[e("input",{attrs:{type:this.literalType},domProps:{value:this.literal},on:{change:function(e){n.emitChange({literal:e.target.value})}}})]:(t=[e("input",{attrs:{type:"text"},domProps:{value:this.expression},on:{change:function(e){n.emitChange({expression:e.target.value})}}}),e("button",{on:{click:function(){n.editingAst=!n.editingAst}}},"ast")],this.editingAst&&t.push(e("expression-editor",{props:{canvasState:this.canvasState,expression:this.expression},on:{change:function(e){n.emitChange({expression:e})}}}))),t},t=Object(i.c)([Object(r.a)({props:["literal","literalType","expression","expressionId","canvasState"],components:{"expression-editor":rt}})],t)}(a.a);function ot(e,t,n,i){return e.substring(0,n[0])+(t||i)+e.substring(n[1])}var ct=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.imageUrl="",t.recommandResults=[],t}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"panelStyle",{get:function(){return{height:this.canvasState.canvasHeight+"px",overflow:"auto"}},enumerable:!0,configurable:!0}),t.prototype.changeName=function(e){"template"===this.canvasState.selection.kind&&a.a.set(this.canvasState.selection.template,"name",e.target.value||void 0)},t.prototype.changePosition=function(e,t){if("template"===this.canvasState.selection.kind){var n=+e.target.value;n="z"===t?Math.round(n):Z(n),a.a.set(this.canvasState.selection.template,t,n)}},t.prototype.changePositionExpression=function(e,t){if("content"===this.canvasState.selection.kind){if(void 0!==e.literal&&("flex"!==this.canvasState.selection.template.display||"z"===t)){var n=+e.literal;n="z"===t?Math.round(n):Z(n),a.a.set(this.canvasState.selection.content,t,n)}a.a.set(this.canvasState.selection.content,t+"Expression",e.expression),a.a.set(this.canvasState.selection.content,t+"ExpressionId",e.expressionId)}},t.prototype.changeSizeExpression=function(e,t){"content"!==this.canvasState.selection.kind||"image"!==this.canvasState.selection.content.kind&&"text"!==this.canvasState.selection.content.kind&&"color"!==this.canvasState.selection.content.kind?"template"===this.canvasState.selection.kind&&(void 0!==e.literal&&(this.canvasState.selection.template[t]=Z(+e.literal)),a.a.set(this.canvasState.selection.template,t+"Expression",e.expression),a.a.set(this.canvasState.selection.template,t+"ExpressionId",e.expressionId)):(void 0!==e.literal&&(this.canvasState.selection.content[t]=Z(+e.literal)),a.a.set(this.canvasState.selection.content,t+"Expression",e.expression),a.a.set(this.canvasState.selection.content,t+"ExpressionId",e.expressionId))},t.prototype.changeRotateExpression=function(e){"content"===this.canvasState.selection.kind&&(void 0!==e.literal&&a.a.set(this.canvasState.selection.content,"rotate",Z(+e.literal)),a.a.set(this.canvasState.selection.content,"rotateExpression",e.expression),a.a.set(this.canvasState.selection.content,"rotateExpressionId",e.expressionId))},t.prototype.changeHidden=function(e){"content"===this.canvasState.selection.kind&&a.a.set(this.canvasState.selection.content,"hidden",e.target.checked)},t.prototype.changeOpacity=function(e){"content"===this.canvasState.selection.kind&&"image"===this.canvasState.selection.content.kind&&a.a.set(this.canvasState.selection.content,"opacity",+e.target.value)},t.prototype.changeIf=function(e){"content"===this.canvasState.selection.kind&&"snapshot"!==this.canvasState.selection.content.kind&&(a.a.set(this.canvasState.selection.content,"if",e.expression),a.a.set(this.canvasState.selection.content,"ifId",e.expressionId))},t.prototype.changeElse=function(e){"content"===this.canvasState.selection.kind&&"snapshot"!==this.canvasState.selection.content.kind&&a.a.set(this.canvasState.selection.content,"else","true"===e.target.value||void 0)},t.prototype.changeRepeatExpression=function(e){if("content"===this.canvasState.selection.kind&&"snapshot"!==this.canvasState.selection.content.kind){var t=ge(Object(i.a)(Object(i.a)({},this.repeat),{expression:e.expression}));a.a.set(this.canvasState.selection.content,"repeat",t),a.a.set(this.canvasState.selection.content,"repeatId",e.expressionId)}},t.prototype.changeRepeatItemName=function(e){if("content"===this.canvasState.selection.kind&&"snapshot"!==this.canvasState.selection.content.kind){var t=ge(Object(i.a)(Object(i.a)({},this.repeat),{itemName:e.target.value}));a.a.set(this.canvasState.selection.content,"repeat",t)}},t.prototype.changeRepeatIndexName=function(e){if("content"===this.canvasState.selection.kind&&"snapshot"!==this.canvasState.selection.content.kind){var t=ge(Object(i.a)(Object(i.a)({},this.repeat),{indexName:e.target.value}));a.a.set(this.canvasState.selection.content,"repeat",t)}},Object.defineProperty(t.prototype,"repeat",{get:function(){return"content"===this.canvasState.selection.kind&&"snapshot"!==this.canvasState.selection.content.kind&&this.canvasState.selection.content.repeat?fe(this.canvasState.selection.content.repeat):{expression:""}},enumerable:!0,configurable:!0}),t.prototype.changeTextExpression=function(e){"content"===this.canvasState.selection.kind&&"text"===this.canvasState.selection.content.kind&&(void 0!==e.literal&&(this.canvasState.selection.content.text=e.literal),a.a.set(this.canvasState.selection.content,"textExpression",e.expression),a.a.set(this.canvasState.selection.content,"textExpressionId",e.expressionId))},t.prototype.changeFontFamily=function(e){"content"===this.canvasState.selection.kind&&"text"===this.canvasState.selection.content.kind&&(this.canvasState.selection.content.fontFamily=e.target.value)},t.prototype.changeFontSizeExpression=function(e){"content"===this.canvasState.selection.kind&&"text"===this.canvasState.selection.content.kind&&(void 0!==e.literal&&(this.canvasState.selection.content.fontSize=Z(+e.literal)),a.a.set(this.canvasState.selection.content,"fontSizeExpression",e.expression),a.a.set(this.canvasState.selection.content,"fontSizeExpressionId",e.expressionId))},t.prototype.changeColorExpression=function(e){"content"!==this.canvasState.selection.kind||"text"!==this.canvasState.selection.content.kind&&"color"!==this.canvasState.selection.content.kind||(void 0!==e.literal&&(this.canvasState.selection.content.color=e.literal),a.a.set(this.canvasState.selection.content,"colorExpression",e.expression),a.a.set(this.canvasState.selection.content,"colorExpressionId",e.expressionId))},t.prototype.changeImageUrlExpression=function(e){"content"===this.canvasState.selection.kind&&"image"===this.canvasState.selection.content.kind&&(void 0!==e.literal&&(this.canvasState.selection.content.url=e.literal),a.a.set(this.canvasState.selection.content,"urlExpression",e.expression),a.a.set(this.canvasState.selection.content,"urlExpressionId",e.expressionId))},t.prototype.debug=function(){console.info(this.canvasState),"none"!==this.canvasState.selection.kind&&console.info(this.canvasState.selection)},t.prototype.addTemplate=function(){this.canvasState.addKind="template"},t.prototype.addImage=function(){this.canvasState.addKind="image"},t.prototype.addText=function(){this.canvasState.addKind="text"},t.prototype.addColor=function(){this.canvasState.addKind="color"},t.prototype.changeFlex=function(e,t){"template"===this.canvasState.selection.kind&&("display"===e&&""===t&&(t=void 0),a.a.set(this.canvasState.selection.template,e,t))},t.prototype.extractAsComponent=function(){if("content"===this.canvasState.selection.kind&&("text"===this.canvasState.selection.content.kind||"image"===this.canvasState.selection.content.kind||"color"===this.canvasState.selection.content.kind)){var e=Math.random().toString(),t=this.canvasState.selection.content,n={id:e,contents:[Object(i.a)(Object(i.a)({},t),{x:0,y:0})],x:0,y:0,width:t.width,height:t.height};this.canvasState.styleGuide.templates.push(n);var r=this.canvasState.selection.template.contents.findIndex((function(e){return e===t}));r>=0&&a.a.set(this.canvasState.selection.template.contents,r,{kind:"reference",id:e,x:t.x,y:t.y}),this.canvasState.selection={kind:"template",template:n}}},t.prototype.renderToImage=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t;return Object(i.e)(this,(function(n){switch(n.label){case 0:return"template"!==this.canvasState.selection.kind?[3,2]:[4,Be(this.canvasState.selection.template,this.canvasState.styleGuide)];case 1:e=n.sent(),t=Ue(this.canvasState.selection.template,this.canvasState.styleGuide,e),this.imageUrl=t,n.label=2;case 2:return[2]}}))}))},t.prototype.changeParameter=function(e,t){"template"===this.canvasState.selection.kind&&this.canvasState.selection.template.parameters&&(e.target.value?this.canvasState.selection.template.parameters[t]=e.target.value:(this.canvasState.selection.template.parameters.splice(t,1),0===this.canvasState.selection.template.parameters.length&&(this.canvasState.selection.template.parameters=void 0)))},t.prototype.addParameter=function(){"template"===this.canvasState.selection.kind&&(this.canvasState.selection.template.parameters?this.canvasState.selection.template.parameters.push(""):a.a.set(this.canvasState.selection.template,"parameters",[""]))},Object.defineProperty(t.prototype,"parameters",{get:function(){if("content"===this.canvasState.selection.kind&&"reference"===this.canvasState.selection.content.kind){var e=this.canvasState.selection.content.id,t=this.canvasState.styleGuide.templates.find((function(t){return t.id===e}));if(t)return t.parameters}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"propsAst",{get:function(){if("content"===this.canvasState.selection.kind&&"reference"===this.canvasState.selection.content.kind){var e=this.canvasState.selection.content.props;if(e)try{var t=Object($.c)(Object($.g)(e));if("ObjectExpression"===t.type)return t}catch(e){}}},enumerable:!0,configurable:!0}),t.prototype.getParameterValue=function(e){if(this.propsAst){var t=pt(e),n=this.propsAst.properties.find(t);if(n&&"Property"===n.type)return Object($.e)(n.value)}return""},t.prototype.getParameterExpressionId=function(e){if("content"===this.canvasState.selection.kind&&"reference"===this.canvasState.selection.content.kind&&this.canvasState.selection.content.propsIds)return this.canvasState.selection.content.propsIds[e]},t.prototype.changeParameterValue=function(e,t){var n;if("content"===this.canvasState.selection.kind&&"reference"===this.canvasState.selection.content.kind){var r=e.expression,s=void 0;if(r)try{s=Object($.c)(Object($.g)(r))}catch(e){}if(this.propsAst){var o=pt(t),c=this.propsAst.properties.findIndex(o);if(c>=0){var l=this.propsAst.properties[c];s?l.value=s:this.propsAst.properties.splice(c,1);var p=Object($.e)(this.propsAst);a.a.set(this.canvasState.selection.content,"props","{}"===p?void 0:p)}else if(s){this.propsAst.properties.push(lt(t,s));p=Object($.e)(this.propsAst);a.a.set(this.canvasState.selection.content,"props","{}"===p?void 0:p)}}else if(s){p=Object($.e)({type:"ObjectExpression",properties:[lt(t,s)],range:[0,0]});a.a.set(this.canvasState.selection.content,"props","{}"===p?void 0:p)}else a.a.set(this.canvasState.selection.content,"props",void 0);var u=Object(i.a)(Object(i.a)({},this.canvasState.selection.content.propsIds),((n={})[t]=e.expressionId,n));a.a.set(this.canvasState.selection.content,"propsIds",Object.keys(u).filter((function(e){return void 0!==u[e]})).length>0?u:void 0)}},t.prototype.toggleVariableEditor=function(){this.canvasState.variableEditorVisible=!this.canvasState.variableEditorVisible},t.prototype.toggleCollectionEditor=function(){this.canvasState.collectionEditorVisible=!this.canvasState.collectionEditorVisible},t.prototype.recommand=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a,r,s,o,c,l,p;return Object(i.e)(this,(function(u){switch(u.label){case 0:if(!this.canvasState.styleGuide.variables||!this.canvasState.styleGuide.collections||"template"!==this.canvasState.selection.kind)return[3,8];e=function(e,t,n){var a,r,s,o,c,l,p=[];try{for(var u=Object(i.h)(e),d=u.next();!d.done;d=u.next()){var h=d.value;0===p.length&&p.push([]);var y=[];try{for(var v=(s=void 0,Object(i.h)(p)),f=v.next();!f.done;f=v.next()){var g=f.value;try{for(var m=(c=void 0,Object(i.h)(t)),x=m.next();!x.done;x=m.next()){var b=x.value;b.kind===h.kind&&y.push(Object(i.g)(g,[Object(i.a)(Object(i.a)({},h),{value:b.color})]))}}catch(e){c={error:e}}finally{try{x&&!x.done&&(l=m.return)&&l.call(m)}finally{if(c)throw c.error}}}}catch(e){s={error:e}}finally{try{f&&!f.done&&(o=v.return)&&o.call(v)}finally{if(s)throw s.error}}p=y}}catch(e){a={error:e}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(a)throw a.error}}return p.filter((function(e){var t,a;if(n)try{for(var r=Object(i.h)(n),s=r.next();!s.done;s=r.next()){if(!te(s.value,{variable:ee(e)}))return!1}}catch(e){t={error:e}}finally{try{s&&!s.done&&(a=r.return)&&a.call(r)}finally{if(t)throw t.error}}return!0}))}(this.canvasState.styleGuide.variables,this.canvasState.styleGuide.collections,this.canvasState.styleGuide.constrains),this.recommandResults=[],u.label=1;case 1:u.trys.push([1,6,7,8]),t=Object(i.h)(e),n=t.next(),u.label=2;case 2:return n.done?[3,5]:(a=n.value,r=Object(i.a)(Object(i.a)({},this.canvasState.styleGuide),{variables:a}),[4,Be(this.canvasState.selection.template,r)]);case 3:s=u.sent(),o=Ue(this.canvasState.selection.template,r,s),this.recommandResults.push({variables:a,preview:o}),u.label=4;case 4:return n=t.next(),[3,2];case 5:return[3,8];case 6:return c=u.sent(),l={error:c},[3,8];case 7:try{n&&!n.done&&(p=t.return)&&p.call(t)}finally{if(l)throw l.error}return[7];case 8:return[2]}}))}))},t.prototype.applyRecommandResult=function(e){this.canvasState.styleGuide.variables=e},t=Object(i.c)([Object(r.a)({render:O,staticRenderFns:j,props:["canvasState"],components:{"expression-input":st}})],t)}(a.a);function lt(e,t){return{type:"Property",key:{type:"Identifier",name:e,range:[0,0]},value:t,shorthand:!1,range:[0,0]}}function pt(e){return function(t){return"Property"===t.type&&("StringLiteral"===t.key.type&&t.key.value===e||"Identifier"===t.key.type&&t.key.name===e)}}n(63);var ut=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.childrenDragIndex=null,t}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"panelStyle",{get:function(){return{height:this.canvasState.canvasHeight+"px",overflow:"auto",whiteSpace:"nowrap",userSelect:"none"}},enumerable:!0,configurable:!0}),t.prototype.render=function(e){var t=this;return e("tree",{style:this.panelStyle,props:{data:[],draggable:!0}},this.canvasState.styleGuide.templates.map((function(n,i){return e("layer-node",{key:n.id,props:{canvasState:t.canvasState,template:n,last:i===t.canvasState.styleGuide.templates.length-1,path:[i],dragIndex:t.childrenDragIndex},on:{drag:function(e){t.childrenDragIndex=e},drop:function(e){if(!(null===t.childrenDragIndex||t.childrenDragIndex===e.index||t.childrenDragIndex===e.index+1&&3===e.dropPosition||t.childrenDragIndex===e.index-1&&1===e.dropPosition)){var n=t.canvasState.styleGuide.templates.splice(t.childrenDragIndex,1)[0],i=e.index;3===e.dropPosition&&i++,t.childrenDragIndex<e.index&&i--,t.canvasState.styleGuide.templates.splice(i,0,n)}}}})})))},t=Object(i.c)([Object(r.a)({props:["canvasState"]})],t)}(a.a),dt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.opened=!0,t.dropPosition=0,t.childrenDragIndex=null,t}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"selected",{get:function(){return"content"===this.canvasState.selection.kind&&this.canvasState.selection.content===this.content||"template"===this.canvasState.selection.kind&&this.canvasState.selection.template===this.template&&!this.content},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dropAllowed",{get:function(){return!(null===this.dragIndex||this.dragIndex===this.index||this.dragIndex===this.index+1&&3===this.dropPosition||this.dragIndex===this.index-1&&1===this.dropPosition)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this.path[this.path.length-1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentName",{get:function(){var e=this.content;if(!e)return this.template.name||"template";if("text"===e.kind&&e.text)return e.text;if("color"===e.kind&&e.color)return e.color;if("reference"===e.kind){var t=this.canvasState.styleGuide.templates.find((function(t){return t.id===e.id}));if(t&&t.name)return t.name}return"snapshot"===e.kind&&e.snapshot.name?e.snapshot.name:e.kind},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contents",{get:function(){return this.content?"snapshot"===this.content.kind?this.content.snapshot.contents:[]:this.template.contents},enumerable:!0,configurable:!0}),t.prototype.render=function(e){var t=this,n=this.contents.map((function(n,a){return e("layer-node",{props:{canvasState:t.canvasState,content:n,template:t.template,last:a===t.contents.length-1,path:Object(i.g)(t.path,[a]),dragIndex:t.childrenDragIndex},on:{drag:function(e){t.childrenDragIndex=e},drop:function(e){if(!(null===t.childrenDragIndex||t.childrenDragIndex===e.index||t.childrenDragIndex===e.index+1&&3===e.dropPosition||t.childrenDragIndex===e.index-1&&1===e.dropPosition)){var n=t.contents.splice(t.childrenDragIndex,1)[0],i=e.index;3===e.dropPosition&&i++,t.childrenDragIndex<e.index&&i--,t.contents.splice(i,0,n)}}}})}));return e("node",{props:{data:{text:this.contentName,children:[],icon:!1,state:{opened:this.opened,selected:this.selected,disabled:!1,loading:!1,highlighted:!1,openable:!1,dropPosition:this.dropPosition,dropAllowed:this.dropAllowed}},last:this.last,path:this.path,draggable:!0},on:{toggle:function(){t.opened=!t.opened},change:function(){t.content?t.canvasState.selection={kind:"content",content:t.content,template:t.template}:t.canvasState.selection={kind:"template",template:t.template}},dragstart:function(e){t.$emit("drag",t.index),e.stopPropagation()},dragend:function(e){t.$emit("drag",void 0),e.stopPropagation()},dragover:function(e){var n=e.target,i=ht(n);t.dropPosition=yt(e.pageY,i,n.offsetHeight),e.stopPropagation(),e.preventDefault()},dragenter:function(e){var n=e.target,i=ht(n);t.dropPosition=yt(e.pageY,i,n.offsetHeight),e.stopPropagation()},dragleave:function(e){t.dropPosition=0,e.stopPropagation()},drop:function(e){t.$emit("drop",{index:t.index,dropPosition:t.dropPosition}),t.dropPosition=0,e.stopPropagation()}}},n)},t=Object(i.c)([Object(r.a)({props:["canvasState","content","template","last","path","dragIndex"]})],t)}(a.a);function ht(e){for(var t=0,n=e;n;)t+=n.offsetTop,n=n.offsetParent;return t}function yt(e,t,n){return e-t<n/2?1:3}a.a.component("layer-node",dt);var vt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.editorStyle={position:"absolute",right:xt+"px",left:"0px",top:"50px",backgroundColor:"white",zIndex:1,height:t.canvasState.canvasHeight+"px",overflow:"auto"},t}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"variable",{get:function(){return JSON.stringify(this.canvasState.styleGuide.variables||[],null,2)},enumerable:!0,configurable:!0}),t.prototype.changeVariable=function(e){try{this.canvasState.styleGuide.variables=JSON.parse(e.target.value)}catch(e){}},t=Object(i.c)([Object(r.a)({render:_,staticRenderFns:z,props:["canvasState"]})],t)}(a.a),ft=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.editorStyle={position:"absolute",right:xt+"px",left:"0px",top:"50px",backgroundColor:"white",zIndex:1,height:t.canvasState.canvasHeight+"px",overflow:"auto"},t}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"collection",{get:function(){return JSON.stringify(this.canvasState.styleGuide.collections||[],null,2)},enumerable:!0,configurable:!0}),t.prototype.changeCollection=function(e){try{this.canvasState.styleGuide.collections=JSON.parse(e.target.value)}catch(e){}},t=Object(i.c)([Object(r.a)({render:p,staticRenderFns:u,props:["canvasState"]})],t)}(a.a),gt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"canvasStyle",{get:function(){return{width:this.canvasState.canvasWidth+"px",height:this.canvasState.canvasHeight+"px",left:mt+"px",position:"absolute"}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layerPanelStyle",{get:function(){return{width:mt+"px",left:0,position:"absolute"}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"operationPanelStyle",{get:function(){return{width:xt+"px",right:0,position:"absolute"}},enumerable:!0,configurable:!0}),t=Object(i.c)([Object(r.a)({render:P,staticRenderFns:I,props:["canvasState"],components:{"render-layer":Me,"dragging-for-selection-layer":Ce,"selection-layer":Ae,"hover-layer":Ke,"mask-layer":Le,"context-menu":Je,"operation-panel":ct,"layer-panel":ut,"variable-editor":vt,"collection-editor":ft}})],t)}(a.a),mt=200,xt=300,bt=mt+xt,St=50,Ot=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.templateModel={categories:[]},t.templateModelEditorVisible=!1,t.canvasState=je.create(Se,window.innerWidth-bt,window.innerHeight-St),t.graphicCanvasState=null,t}return Object(i.d)(t,e),t.prototype.resize=function(){this.canvasState.canvasWidth=window.innerWidth-bt,this.canvasState.canvasHeight=window.innerHeight-St,this.canvasState.applyCanvasSizeChange(),this.graphicCanvasState&&(this.graphicCanvasState.canvasWidth=window.innerWidth-bt,this.graphicCanvasState.canvasHeight=window.innerHeight-St,this.graphicCanvasState.applyCanvasSizeChange())},t.prototype.loadGraphicCanvas=function(e){this.graphicCanvasState=je.create({name:"",templates:[e]},window.innerWidth-bt,window.innerHeight-St),this.graphicCanvasState.selection={kind:"template",template:e}},t=Object(i.c)([r.a],t)}(a.a);n.d(t,"App",(function(){return jt}));var jt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.appState=new Ot,t}return Object(i.d)(t,e),t.prototype.mounted=function(){var e=this;window.addEventListener("resize",(function(){e.appState.resize()}))},t=Object(i.c)([Object(r.a)({render:c,staticRenderFns:l,components:{"app-panel":xe,"template-model-editor":be,"template-editor":gt}})],t)}(a.a);new jt({el:"#container"})}});
</script>
